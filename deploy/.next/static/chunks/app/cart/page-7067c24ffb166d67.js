(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1565],{49614:function(e,t,s){Promise.resolve().then(s.bind(s,23886))},23886:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(57437),n=s(2265),i=s(36891),r=s(51817),l=s(16275),o=s(18930),c=s(21047),d=s(99397),u=s(76858),m=s(62869),p=s(66070),x=s(84092),f=s(95186),h=s(33145),g=s(27648),b=s(94508),j=s(73390);function v(){var e;let[t,s]=(0,n.useState)(""),[v,y]=(0,n.useState)(null),[N,C]=(0,n.useState)(!1),[w,S]=(0,n.useState)([]),[D,T]=(0,n.useState)(!1),[k,z]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=()=>{let e=j.x.getState();console.log("Cart items from store:",e.items.length,e.items),S(e.items),e.appliedCoupon&&(y(e.appliedCoupon),s(e.appliedCoupon.code)),C(!0)};e();let t=setTimeout(e,100),a=j.x.subscribe(e=>{console.log("Cart store updated:",e.items.length),S(e.items),e.appliedCoupon&&y(e.appliedCoupon)});return()=>{clearTimeout(t),a()}},[]),(0,n.useEffect)(()=>{let e=async()=>{let e=w.reduce((e,t)=>e+t.price*t.quantity,0);if(!(e<=0)&&!v){T(!0);try{let t=await fetch("/api/coupons/best?total=".concat(e));if(t.ok){let e=await t.json();if(e.found&&e.coupon){let t={code:e.coupon.code,discountType:e.coupon.discountType,discountValue:e.coupon.discountValue,maxDiscount:e.coupon.maxDiscount,isFreeShipping:e.coupon.isFreeShipping||"free_shipping"===e.coupon.discountType};y(t),s(e.coupon.code),z({savings:e.savings,message:e.message,isFreeShipping:t.isFreeShipping}),j.x.getState().applyCoupon(t)}}}catch(e){console.log("Failed to fetch best coupon")}finally{T(!1)}}};N&&w.length>0&&!v&&e()},[N,w,v]);let E=(e,t)=>{t<1||j.x.getState().updateQuantity(e,t)},F=e=>{j.x.getState().removeItem(e)},I=async()=>{try{let e=await fetch("/api/coupons/validate?code=".concat(t));if(e.ok){let t=await e.json(),s={code:t.coupon.code,discountType:t.coupon.discountType,discountValue:t.coupon.discountValue,maxDiscount:t.coupon.maxDiscount};y(s),j.x.getState().applyCoupon(s),z(null),alert("Coupon applied successfully!")}else if("WELCOME10"===t.toUpperCase()){let e={code:"WELCOME10",discountType:"percentage",discountValue:10};y(e),j.x.getState().applyCoupon(e),alert("Coupon applied! 10% discount")}else if("SAVE500"===t.toUpperCase()){let e={code:"SAVE500",discountType:"fixed",discountValue:500};y(e),j.x.getState().applyCoupon(e),alert("Coupon applied! ৳500 off")}else alert("Invalid coupon code")}catch(e){alert("Failed to validate coupon")}},Z=w.reduce((e,t)=>e+t.price*t.quantity,0),V=Z>=2e3?0:Z>0?100:0,_=0,q=!1;v&&("free_shipping"===v.discountType?(q=!0,_=0):_="percentage"===v.discountType?Math.round(v.discountValue/100*Z):v.discountValue);let A=q?0:V,R=Math.max(0,Z-_+A);return N?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,a.jsx)(x.a,{items:[{label:"Cart"}],className:"mb-4"}),(0,a.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Shopping Cart"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:[w.length," ",1===w.length?"item":"items"," in your cart"]})]}),0===w.length?(0,a.jsxs)(p.Zb,{className:"p-12 text-center",children:[(0,a.jsx)(l.Z,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Your cart is empty"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"Add some products to get started!"}),(0,a.jsx)(m.z,{asChild:!0,size:"lg",children:(0,a.jsx)(g.default,{href:"/shop",children:"Browse Products"})})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>{j.x.getState().clearCart()},className:"text-red-600 hover:bg-red-50",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Clear Cart"]})}),w.map((e,t)=>(0,a.jsx)(i.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},children:(0,a.jsx)(p.Zb,{children:(0,a.jsx)(p.aY,{className:"p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex gap-3 sm:gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-20 h-20 sm:w-24 sm:h-24 relative rounded-lg overflow-hidden bg-gray-100",children:(0,a.jsx)(h.default,{src:e.image||"/placeholder.png",alt:e.name,fill:!0,className:"object-cover"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm sm:text-base line-clamp-2",children:e.name}),(e.size||e.color)&&(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5 sm:mt-1",children:[e.size&&"Size: ".concat(e.size),e.size&&e.color&&" \xb7 ",e.color&&"Color: ".concat(e.color)]}),(0,a.jsx)("p",{className:"text-base sm:text-lg font-bold text-blue-600 mt-1 sm:mt-2",children:(0,b.T4)(e.price)})]}),(0,a.jsx)(m.z,{variant:"ghost",size:"sm",onClick:()=>F(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 sm:hidden h-8 w-8 p-0",children:(0,a.jsx)(o.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:flex-col sm:items-end sm:justify-between",children:[(0,a.jsx)(m.z,{variant:"ghost",size:"sm",onClick:()=>F(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 hidden sm:flex",children:(0,a.jsx)(o.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"flex items-center border-2 rounded-lg",children:[(0,a.jsx)("button",{onClick:()=>E(e.id,e.quantity-1),className:"p-2 sm:p-2 hover:bg-gray-100 transition min-w-[40px] min-h-[40px] flex items-center justify-center",disabled:e.quantity<=1,children:(0,a.jsx)(c.Z,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"px-3 sm:px-4 font-semibold min-w-[40px] text-center",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>E(e.id,e.quantity+1),className:"p-2 sm:p-2 hover:bg-gray-100 transition min-w-[40px] min-h-[40px] flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground sm:mt-2",children:(0,a.jsx)("span",{className:"font-semibold text-foreground",children:(0,b.T4)(e.price*e.quantity)})})]})]})})})},e.id))]}),(0,a.jsx)("div",{children:(0,a.jsx)(i.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"sticky top-24",children:(0,a.jsx)(p.Zb,{children:(0,a.jsxs)(p.aY,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Order Summary"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"text-sm font-semibold mb-2 block",children:"Have a coupon?"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(f.I,{placeholder:"Enter code",value:t,onChange:e=>s(e.target.value.toUpperCase())}),(0,a.jsx)(m.z,{onClick:I,variant:"outline",disabled:D,children:D?(0,a.jsx)(r.Z,{className:"w-4 h-4 animate-spin"}):"Apply"})]}),v&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsxs)("p",{className:"text-sm text-green-700 flex items-center gap-1 font-medium",children:["✓ ",v.code," applied",k&&(0,a.jsx)("span",{className:"text-green-600 font-bold ml-1",children:"(Auto-applied!)"})]}),k&&(0,a.jsx)("p",{className:"text-xs text-green-600 mt-1",children:k.isFreeShipping?"\uD83D\uDE9A Free shipping auto-applied!":"\uD83C\uDF89 Best coupon auto-applied! You save ৳".concat((null===(e=k.savings)||void 0===e?void 0:e.toFixed(0))||"0")})]}),!v&&!D&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"\uD83D\uDCA1 We'll auto-apply the best coupon for you!"})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,a.jsx)("span",{className:"font-semibold",children:(0,b.T4)(Z)})]}),(_>0||q)&&(0,a.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,a.jsx)("span",{children:q?"\uD83D\uDE9A Free Shipping":"Discount"}),(0,a.jsx)("span",{className:"font-semibold",children:q?"FREE (was ".concat((0,b.T4)(V),")"):"-".concat((0,b.T4)(_))})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:["Shipping",q&&(0,a.jsx)("span",{className:"ml-1 text-xs text-green-600",children:"\uD83C\uDF89"})]}),(0,a.jsx)("span",{className:"font-semibold ".concat(q?"text-green-600":""),children:0===A?(0,a.jsx)("span",{className:"text-green-600",children:"Free"}):(0,b.T4)(A)})]}),Z>0&&Z<2e3&&!q&&(0,a.jsxs)("p",{className:"text-xs text-blue-600",children:["Add ",(0,b.T4)(2e3-Z)," more for free shipping!"]}),(0,a.jsxs)("div",{className:"border-t pt-3 flex justify-between text-lg",children:[(0,a.jsx)("span",{className:"font-bold",children:"Total"}),(0,a.jsx)("span",{className:"font-bold text-blue-600",children:(0,b.T4)(R)})]})]}),(0,a.jsx)(m.z,{asChild:!0,size:"lg",className:"w-full",children:(0,a.jsxs)(g.default,{href:"/checkout",children:["Proceed to Checkout",(0,a.jsx)(u.Z,{className:"w-5 h-5 ml-2"})]})}),(0,a.jsx)(m.z,{asChild:!0,variant:"outline",size:"lg",className:"w-full mt-3",children:(0,a.jsx)(g.default,{href:"/shop",children:"Continue Shopping"})})]})})})})]})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(r.Z,{className:"w-8 h-8 animate-spin text-blue-600"})})}},84092:function(e,t,s){"use strict";s.d(t,{a:function(){return l}});var a=s(57437),n=s(27648),i=s(14938),r=s(10407);function l(e){let{items:t,className:s=""}=e;return(0,a.jsx)("nav",{className:"flex items-center text-sm text-muted-foreground ".concat(s),"aria-label":"Breadcrumb",children:(0,a.jsxs)("ol",{className:"flex items-center flex-wrap gap-1 sm:gap-2",children:[(0,a.jsx)("li",{className:"flex items-center",children:(0,a.jsxs)(n.default,{href:"/",className:"flex items-center hover:text-foreground transition-colors",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Home"})]})}),t.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(r.Z,{className:"w-4 h-4 mx-1 text-muted-foreground/50"}),e.href?(0,a.jsx)(n.default,{href:e.href,className:"hover:text-foreground transition-colors font-medium",children:e.label}):(0,a.jsx)("span",{className:"text-foreground font-semibold truncate max-w-[200px]","aria-current":"page",children:e.label})]},t))]})})}},62869:function(e,t,s){"use strict";s.d(t,{d:function(){return o},z:function(){return c}});var a=s(57437),n=s(2265),i=s(37053),r=s(90535),l=s(94508);let o=(0,r.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:s,variant:n,size:r,asChild:c=!1,...d}=e,u=c?i.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:n,size:r,className:s})),ref:t,...d})});c.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return r},aY:function(){return d},ll:function(){return o}});var a=s(57437),n=s(2265),i=s(94508);let r=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});r.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},95186:function(e,t,s){"use strict";s.d(t,{I:function(){return r}});var a=s(57437),n=s(2265),i=s(94508);let r=n.forwardRef((e,t)=>{let{className:s,type:n,...r}=e;return(0,a.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});r.displayName="Input"},94508:function(e,t,s){"use strict";s.d(t,{T4:function(){return r},cn:function(){return i}});var a=s(61994),n=s(53335);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}function r(e){return new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0}).format(e)}},73390:function(e,t,s){"use strict";s.d(t,{x:function(){return i}});var a=s(3011),n=s(89134);let i=(0,a.U)()((0,n.tJ)((e,t)=>({items:[],appliedCoupon:null,_hasHydrated:!1,setHasHydrated:t=>{e({_hasHydrated:t})},addItem:s=>{let a=t().items,n=a.find(e=>e.productId===s.productId&&e.variantId===s.variantId);n?e({items:a.map(e=>e.id===n.id?{...e,quantity:e.quantity+s.quantity}:e)}):e({items:[...a,{...s,id:"".concat(s.productId,"-").concat(s.variantId||"default","-").concat(Date.now())}]})},removeItem:s=>{e({items:t().items.filter(e=>e.id!==s)})},updateQuantity:(s,a)=>{a<=0?t().removeItem(s):e({items:t().items.map(e=>e.id===s?{...e,quantity:a}:e)})},clearCart:()=>{e({items:[],appliedCoupon:null})},applyCoupon:t=>{e({appliedCoupon:t})},removeCoupon:()=>{e({appliedCoupon:null})},getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0),getDiscount:()=>{let e=t().appliedCoupon;if(!e)return 0;let s=t().getTotalPrice();if("percentage"===e.discountType){let t=s*e.discountValue/100;return e.maxDiscount&&t>e.maxDiscount&&(t=e.maxDiscount),Math.round(t)}return e.discountValue}}),{name:"cart-storage",storage:(0,n.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{null==e||e.setHasHydrated(!0)}}))}},function(e){e.O(0,[8590,6891,5650,3145,4362,2971,2117,1744],function(){return e(e.s=49614)}),_N_E=e.O()}]);