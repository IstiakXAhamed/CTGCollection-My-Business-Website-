(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6034],{2477:function(e,t,s){Promise.resolve().then(s.bind(s,12221))},12221:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var r=s(57437),a=s(2265),n=s(99376),i=s(27648),l=s(66070),o=s(62869),c=s(35974),d=s(51817),m=s(64413),u=s(32660),x=s(89337),p=s(44794),f=s(86595),h=s(83774),g=s(13041),v=s(89345),y=s(16275),j=s(36891),b=s(73390),N=s(35153);function w(){let e=(0,n.useParams)(),t=null==e?void 0:e.slug,{toast:s}=(0,N.pm)(),w=(0,b.x)(e=>e.addItem),[S,T]=(0,a.useState)(null),[I,_]=(0,a.useState)(!0),[C,k]=(0,a.useState)("");(0,a.useEffect)(()=>{t&&P()},[t]);let P=async()=>{try{let e=await fetch("/api/shops/".concat(t));if(e.ok){let t=await e.json();T(t.shop)}else{let t=await e.json();k(t.error||"Shop not found")}}catch(e){k("Failed to load shop")}finally{_(!1)}},A=e=>{var t;w({productId:e.id,name:e.name,price:e.salePrice||e.basePrice,image:(null===(t=e.images)||void 0===t?void 0:t[0])||"/placeholder.jpg",quantity:1}),s({title:"Added to cart!",description:"".concat(e.name," added to your cart")})};return I?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(d.Z,{className:"w-8 h-8 animate-spin text-purple-600"})}):C||!S?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center gap-4 p-4",children:[(0,r.jsx)(m.Z,{className:"w-16 h-16 text-gray-300"}),(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-700",children:C||"Shop not found"}),(0,r.jsx)(i.default,{href:"/shop",children:(0,r.jsxs)(o.z,{variant:"outline",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4 mr-2"})," Back to Shop"]})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsxs)("div",{className:"h-32 sm:h-48 lg:h-64 bg-gradient-to-r from-purple-600 to-pink-600 relative",style:S.banner?{backgroundImage:"url(".concat(S.banner,")"),backgroundSize:"cover",backgroundPosition:"center"}:{},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/30"}),(0,r.jsx)("div",{className:"container mx-auto px-3 sm:px-6",children:(0,r.jsx)(i.default,{href:"/shop",className:"absolute top-4 left-4 sm:left-6",children:(0,r.jsxs)(o.z,{variant:"secondary",size:"sm",className:"gap-1.5 text-xs sm:text-sm bg-white/90 hover:bg-white",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"})," Back"]})})})]}),(0,r.jsx)("div",{className:"container mx-auto px-3 sm:px-6 -mt-12 sm:-mt-16 relative z-10",children:(0,r.jsx)("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 sm:w-28 sm:h-28 rounded-xl sm:rounded-2xl bg-gradient-to-br from-purple-100 to-pink-100 flex items-center justify-center flex-shrink-0 mx-auto sm:mx-0 shadow-md",children:S.logo?(0,r.jsx)("img",{src:S.logo,alt:S.name,className:"w-full h-full object-cover rounded-xl sm:rounded-2xl"}):(0,r.jsx)(m.Z,{className:"w-10 h-10 sm:w-14 sm:h-14 text-purple-600"})}),(0,r.jsxs)("div",{className:"flex-1 text-center sm:text-left",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center sm:justify-start gap-2 flex-wrap",children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:S.name}),S.isVerified&&(0,r.jsx)(x.Z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500"})]}),S.description&&(0,r.jsx)("p",{className:"text-gray-600 text-sm sm:text-base mt-2 line-clamp-2",children:S.description}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center sm:justify-start gap-3 sm:gap-4 mt-3 sm:mt-4 text-xs sm:text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"font-semibold",children:S._count.products})," Products"]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),(0,r.jsx)("span",{className:"font-semibold",children:S.rating.toFixed(1)})]}),S.city&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4"}),S.city]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center sm:justify-start gap-2 sm:gap-4 mt-3 text-xs sm:text-sm",children:[S.phone&&(0,r.jsxs)("a",{href:"tel:".concat(S.phone),className:"flex items-center gap-1 text-purple-600 hover:underline",children:[(0,r.jsx)(g.Z,{className:"w-3.5 h-3.5"})," ",S.phone]}),S.email&&(0,r.jsxs)("a",{href:"mailto:".concat(S.email),className:"flex items-center gap-1 text-purple-600 hover:underline",children:[(0,r.jsx)(v.Z,{className:"w-3.5 h-3.5"})," ",S.email]})]})]})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-3 sm:px-6 py-6 sm:py-8",children:[(0,r.jsxs)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-4 sm:mb-6",children:["All Products (",S._count.products,")"]}),0===S.products.length?(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,r.jsx)(p.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,r.jsx)("p",{children:"No products yet"})]}):(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4 lg:gap-6",children:S.products.map((e,t)=>{var s;return(0,r.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:(0,r.jsxs)(l.Zb,{className:"overflow-hidden hover:shadow-lg transition group",children:[(0,r.jsx)(i.default,{href:"/product/".concat(e.slug),children:(0,r.jsxs)("div",{className:"aspect-square relative bg-gray-100",children:[(0,r.jsx)("img",{src:(null===(s=e.images)||void 0===s?void 0:s[0])||"/placeholder.jpg",alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition"}),e.salePrice&&e.salePrice<e.basePrice&&(0,r.jsxs)(c.C,{className:"absolute top-2 left-2 bg-red-500 text-[10px] sm:text-xs",children:[Math.round((1-e.salePrice/e.basePrice)*100),"% OFF"]})]})}),(0,r.jsxs)(l.aY,{className:"p-2.5 sm:p-4",children:[(0,r.jsx)(i.default,{href:"/product/".concat(e.slug),children:(0,r.jsx)("h3",{className:"font-medium text-xs sm:text-sm line-clamp-2 hover:text-purple-600 min-h-[2rem] sm:min-h-[2.5rem]",children:e.name})}),(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-[10px] sm:text-xs text-gray-500",children:[(0,r.jsx)(f.Z,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),e.rating.toFixed(1)," (",e.reviewCount,")"]}),(0,r.jsx)("div",{className:"flex items-center gap-1.5 mt-2",children:e.salePrice?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"font-bold text-sm sm:text-base text-purple-600",children:["৳",e.salePrice.toLocaleString()]}),(0,r.jsxs)("span",{className:"text-[10px] sm:text-xs text-gray-400 line-through",children:["৳",e.basePrice.toLocaleString()]})]}):(0,r.jsxs)("span",{className:"font-bold text-sm sm:text-base",children:["৳",e.basePrice.toLocaleString()]})}),(0,r.jsxs)(o.z,{size:"sm",className:"w-full mt-2 h-8 text-xs sm:text-sm",onClick:t=>{t.preventDefault(),A(e)},children:[(0,r.jsx)(y.Z,{className:"w-3.5 h-3.5 mr-1"}),"Add"]})]})]})},e.id)})})]})]})}},35974:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var r=s(57437);s(2265);var a=s(90535),n=s(94508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},62869:function(e,t,s){"use strict";s.d(t,{d:function(){return o},z:function(){return c}});var r=s(57437),a=s(2265),n=s(37053),i=s(90535),l=s(94508);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...d}=e,m=c?n.g7:"button";return(0,r.jsx)(m,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:t,...d})});c.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var r=s(57437),a=s(2265),n=s(94508);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},35153:function(e,t,s){"use strict";s.d(t,{pm:function(){return u}});var r=s(2265);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function m(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=r.useState(c);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},94508:function(e,t,s){"use strict";s.d(t,{T4:function(){return i},cn:function(){return n}});var r=s(61994),a=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}function i(e){return new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0}).format(e)}},73390:function(e,t,s){"use strict";s.d(t,{x:function(){return n}});var r=s(3011),a=s(89134);let n=(0,r.U)()((0,a.tJ)((e,t)=>({items:[],appliedCoupon:null,_hasHydrated:!1,setHasHydrated:t=>{e({_hasHydrated:t})},addItem:s=>{let r=t().items,a=r.find(e=>e.productId===s.productId&&e.variantId===s.variantId);a?e({items:r.map(e=>e.id===a.id?{...e,quantity:e.quantity+s.quantity}:e)}):e({items:[...r,{...s,id:"".concat(s.productId,"-").concat(s.variantId||"default","-").concat(Date.now())}]})},removeItem:s=>{e({items:t().items.filter(e=>e.id!==s)})},updateQuantity:(s,r)=>{r<=0?t().removeItem(s):e({items:t().items.map(e=>e.id===s?{...e,quantity:r}:e)})},clearCart:()=>{e({items:[],appliedCoupon:null})},applyCoupon:t=>{e({appliedCoupon:t})},removeCoupon:()=>{e({appliedCoupon:null})},getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0),getDiscount:()=>{let e=t().appliedCoupon;if(!e)return 0;let s=t().getTotalPrice();if("percentage"===e.discountType){let t=s*e.discountValue/100;return e.maxDiscount&&t>e.maxDiscount&&(t=e.maxDiscount),Math.round(t)}return e.discountValue}}),{name:"cart-storage",storage:(0,a.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{null==e||e.setHasHydrated(!0)}}))}},function(e){e.O(0,[8590,6891,5650,266,2971,2117,1744],function(){return e(e.s=2477)}),_N_E=e.O()}]);