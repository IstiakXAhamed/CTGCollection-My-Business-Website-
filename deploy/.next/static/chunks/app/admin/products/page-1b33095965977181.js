(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4122],{80037:function(e,t,s){Promise.resolve().then(s.bind(s,45845))},45845:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(57437),r=s(2265),n=s(27648),i=s(33145),l=s(66070),d=s(62869),c=s(95186),o=s(1828),u=s(37099),m=s(99397),f=s(73247),x=s(88893),p=s(18930),h=s(51817),g=s(94508),v=s(35153);function j(){let[e,t]=(0,r.useState)([]),[s,j]=(0,r.useState)(!0),[N,b]=(0,r.useState)(""),[y,w]=(0,r.useState)(!1),[k,T]=(0,r.useState)(null),[C,S]=(0,r.useState)(!1),{toast:A}=(0,v.pm)();(0,r.useEffect)(()=>{F()},[]);let F=async()=>{try{let e=await fetch("/api/admin/products?limit=50",{credentials:"include"});if(e.ok){let s=await e.json();t(s.products||[])}}catch(e){console.error("Failed to fetch products:",e)}finally{j(!1)}},z=async()=>{if(k){S(!0);try{let s=await fetch("/api/admin/products/".concat(k.id),{method:"DELETE",credentials:"include"});if(s.ok)A({title:"Success!",description:"".concat(k.name," deleted successfully")}),t(e.filter(e=>e.id!==k.id)),w(!1),T(null);else{let e=await s.json();A({title:"Error",description:e.error||"Failed to delete product",variant:"destructive"})}}catch(e){console.error("Failed to delete product:",e),A({title:"Error",description:"An error occurred while deleting the product",variant:"destructive"})}finally{S(!1)}}},E=async s=>{let a=s.isFeatured;t(e.map(e=>e.id===s.id?{...e,isFeatured:!e.isFeatured}:e));try{(await fetch("/api/admin/products/".concat(s.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,isFeatured:!a,variants:s.variants.map(e=>({size:e.size,color:e.color,stock:e.stock,sku:e.sku||""}))}),credentials:"include"})).ok?A({title:"Updated!",description:"Featured status ".concat(a?"disabled":"enabled")}):(t(e.map(e=>e.id===s.id?{...e,isFeatured:a}:e)),A({title:"Error",description:"Failed to update",variant:"destructive"}))}catch(r){t(e.map(e=>e.id===s.id?{...e,isFeatured:a}:e)),console.error("Failed to toggle featured:",r)}},_=async s=>{let a=s.isActive;t(e.map(e=>e.id===s.id?{...e,isActive:!e.isActive}:e));try{(await fetch("/api/admin/products/".concat(s.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,isActive:!a,variants:s.variants.map(e=>({size:e.size,color:e.color,stock:e.stock,sku:e.sku||""}))}),credentials:"include"})).ok?A({title:"Updated!",description:"Product ".concat(a?"deactivated":"activated")}):(t(e.map(e=>e.id===s.id?{...e,isActive:a}:e)),A({title:"Error",description:"Failed to update",variant:"destructive"}))}catch(r){t(e.map(e=>e.id===s.id?{...e,isActive:a}:e)),console.error("Failed to toggle active:",r)}},O=e.filter(e=>e.name.toLowerCase().includes(N.toLowerCase()));return s?(0,a.jsx)("div",{className:"text-center py-12",children:"Loading products..."}):(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-1",children:"Products"}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[e.length," total"]})]}),(0,a.jsx)(n.default,{href:"/admin/products/new",children:(0,a.jsxs)(d.z,{size:"sm",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Add Product"})]})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{className:"p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-muted-foreground"}),(0,a.jsx)(c.I,{placeholder:"Search...",value:N,onChange:e=>b(e.target.value),className:"pl-9 sm:pl-10 h-10 text-sm"})]})}),(0,a.jsxs)(l.aY,{className:"p-2 sm:p-4",children:[(0,a.jsx)("div",{className:"lg:hidden space-y-3",children:O.map(e=>{var t;return(0,a.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"relative w-14 h-14 sm:w-16 sm:h-16 bg-gray-100 rounded flex-shrink-0",children:(0,a.jsx)(i.default,{src:e.images[0],alt:e.name,fill:!0,className:"object-cover rounded"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-semibold text-xs sm:text-sm truncate",children:e.name}),(0,a.jsx)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:(null===(t=e.category)||void 0===t?void 0:t.name)||"-"}),(0,a.jsx)("p",{className:"font-semibold text-xs sm:text-sm text-blue-600 mt-1",children:(0,g.T4)(e.salePrice||e.basePrice)})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-2 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-1.5 text-[10px] sm:text-xs",children:[(0,a.jsx)(o.r,{checked:e.isFeatured,onCheckedChange:()=>E(e),className:"scale-75"}),(0,a.jsx)("span",{children:"Featured"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-1.5 text-[10px] sm:text-xs",children:[(0,a.jsx)(o.r,{checked:e.isActive,onCheckedChange:()=>_(e),className:"scale-75"}),(0,a.jsx)("span",{children:"Active"})]})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(n.default,{href:"/admin/products/".concat(e.id,"/edit"),children:(0,a.jsx)(d.z,{size:"sm",variant:"outline",className:"h-7 w-7 p-0",children:(0,a.jsx)(x.Z,{className:"w-3 h-3"})})}),(0,a.jsx)(d.z,{size:"sm",variant:"outline",className:"h-7 w-7 p-0 text-red-600",onClick:()=>{T(e),w(!0)},children:(0,a.jsx)(p.Z,{className:"w-3 h-3"})})]})]})]},e.id)})}),(0,a.jsx)("div",{className:"hidden lg:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Product"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Category"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Price"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Stock"}),(0,a.jsx)("th",{className:"text-center py-3 px-4",children:"Featured"}),(0,a.jsx)("th",{className:"text-center py-3 px-4",children:"Active"}),(0,a.jsx)("th",{className:"text-right py-3 px-4",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:O.map(e=>{var t,s,r;return(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"relative w-12 h-12 bg-gray-100 rounded",children:(0,a.jsx)(i.default,{src:e.images[0],alt:e.name,fill:!0,className:"object-cover rounded"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["#",e.slug]})]})]})}),(0,a.jsx)("td",{className:"py-4 px-4",children:null===(t=e.category)||void 0===t?void 0:t.name}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:(0,g.T4)(e.salePrice||e.basePrice)}),e.salePrice&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-through",children:(0,g.T4)(e.basePrice)})]})}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat((null===(s=e.variants)||void 0===s?void 0:s.some(e=>e.stock>0))?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[(null===(r=e.variants)||void 0===r?void 0:r.reduce((e,t)=>e+t.stock,0))||0," units"]})}),(0,a.jsx)("td",{className:"py-4 px-4 text-center",children:(0,a.jsx)(o.r,{checked:e.isFeatured,onCheckedChange:()=>E(e)})}),(0,a.jsx)("td",{className:"py-4 px-4 text-center",children:(0,a.jsx)(o.r,{checked:e.isActive,onCheckedChange:()=>_(e)})}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(n.default,{href:"/admin/products/".concat(e.id,"/edit"),children:(0,a.jsx)(d.z,{size:"sm",variant:"outline",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})})}),(0,a.jsx)(d.z,{size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50",onClick:()=>{T(e),w(!0)},children:(0,a.jsx)(p.Z,{className:"w-4 h-4"})})]})})]},e.id)})})]})})]})]}),(0,a.jsx)(u.aR,{open:y,onOpenChange:w,children:(0,a.jsxs)(u._T,{children:[(0,a.jsxs)(u.fY,{children:[(0,a.jsx)(u.f$,{children:"Are you sure?"}),(0,a.jsxs)(u.yT,{children:["This will permanently delete ",(0,a.jsx)("strong",{children:null==k?void 0:k.name}),". This action cannot be undone."]})]}),(0,a.jsxs)(u.xo,{children:[(0,a.jsx)(u.le,{onClick:()=>T(null),children:"Cancel"}),(0,a.jsx)(u.OL,{onClick:z,disabled:C,className:"bg-red-600 hover:bg-red-700",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete Product"})]})]})})]})}},37099:function(e,t,s){"use strict";s.d(t,{OL:function(){return h},_T:function(){return u},aR:function(){return d},f$:function(){return x},fY:function(){return m},le:function(){return g},xo:function(){return f},yT:function(){return p}});var a=s(57437),r=s(2265),n=s(7880),i=s(94508),l=s(62869);let d=n.fC;n.xz;let c=n.h_,o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});o.displayName=n.aV.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(o,{}),(0,a.jsx)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});u.displayName=n.VY.displayName;let m=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};m.displayName="AlertDialogHeader";let f=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};f.displayName="AlertDialogFooter";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold",s),...r})});x.displayName=n.Dx.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});p.displayName=n.dk.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aU,{ref:t,className:(0,i.cn)((0,l.d)(),s),...r})});h.displayName=n.aU.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.$j,{ref:t,className:(0,i.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});g.displayName=n.$j.displayName},62869:function(e,t,s){"use strict";s.d(t,{d:function(){return d},z:function(){return c}});var a=s(57437),r=s(2265),n=s(37053),i=s(90535),l=s(94508);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:c=!1,...o}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(d({variant:r,size:i,className:s})),ref:t,...o})});c.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return o},ll:function(){return d}});var a=s(57437),r=s(2265),n=s(94508);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});d.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},95186:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var a=s(57437),r=s(2265),n=s(94508);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},1828:function(e,t,s){"use strict";s.d(t,{r:function(){return l}});var a=s(57437),r=s(2265),n=s(50721),i=s(94508);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,a.jsx)(n.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=n.fC.displayName},35153:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var a=s(2265);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function o(e){c=l(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},94508:function(e,t,s){"use strict";s.d(t,{T4:function(){return i},cn:function(){return n}});var a=s(61994),r=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}function i(e){return new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0}).format(e)}}},function(e){e.O(0,[8590,5650,3145,6053,1,3638,2971,2117,1744],function(){return e(e.s=80037)}),_N_E=e.O()}]);