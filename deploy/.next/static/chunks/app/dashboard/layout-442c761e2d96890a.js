(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7663],{2293:function(e,t,a){Promise.resolve().then(a.bind(a,38564))},38564:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var r=a(57437),s=a(2265),l=a(27648),n=a(99376),i=a(92369),c=a(44794),d=a(83774),o=a(88997),u=a(98617),h=a(91804),m=a(53417),f=a(51817),p=a(47692),x=a(32660),y=a(66070),j=a(62869),b=a(92805),g=a(64134);let v=[{icon:i.Z,label:"Profile",href:"/dashboard/profile"},{icon:c.Z,label:"Orders",href:"/dashboard/orders"},{icon:d.Z,label:"Addresses",href:"/dashboard/addresses"},{icon:o.Z,label:"Wishlist",href:"/dashboard/wishlist"},{icon:u.Z,label:"Loyalty",href:"/dashboard/loyalty"},{icon:h.Z,label:"Wallet",href:"/dashboard/wallet"},{icon:m.Z,label:"Messages",href:"/dashboard/chat"}];function N(e){var t,a;let{children:i}=e,c=(0,n.usePathname)(),d=(0,n.useRouter)(),[o,u]=(0,s.useState)(!0),[h,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{N()},[]);let N=async()=>{try{let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let t=await e.json();t.authenticated&&t.user?m(t.user):d.push("/login?redirect="+encodeURIComponent(c))}else d.push("/login?redirect="+encodeURIComponent(c))}catch(e){d.push("/login")}finally{u(!1)}},k=async()=>{try{await fetch("/api/auth/me",{method:"POST",credentials:"include"}),localStorage.removeItem("auth-storage"),d.push("/")}catch(e){console.error("Logout failed:",e)}};return o?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(f.Z,{className:"w-8 h-8 animate-spin text-blue-600"})}):h?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:(0,r.jsxs)("div",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-8",children:[(0,r.jsxs)("div",{className:"lg:hidden mb-4",children:[(0,r.jsx)(y.Zb,{className:"p-3 sm:p-4 mb-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold text-sm",children:(null===(t=h.name)||void 0===t?void 0:t.charAt(0).toUpperCase())||"U"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h2",{className:"font-bold text-sm truncate",children:h.name}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:h.email})]}),(0,r.jsx)(b.Z,{role:h.role,tier:h.tier,size:"sm"})]})}),(0,r.jsx)("div",{className:"overflow-x-auto -mx-3 px-3",children:(0,r.jsxs)("div",{className:"flex gap-2 pb-2 min-w-max",children:[v.map(e=>{let t=e.icon,a=c===e.href;return(0,r.jsx)(l.default,{href:e.href,children:(0,r.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2.5 rounded-full whitespace-nowrap text-sm font-medium transition ".concat(a?"bg-blue-600 text-white":"bg-white border hover:bg-gray-50"),children:[(0,r.jsx)(t,{className:"w-4 h-4"}),e.label]})},e.href)}),(0,r.jsxs)("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2.5 rounded-full whitespace-nowrap text-sm font-medium bg-white border text-red-600 hover:bg-red-50 transition",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),"Logout"]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 lg:gap-8",children:[(0,r.jsx)("aside",{className:"hidden lg:block lg:col-span-1",children:(0,r.jsxs)(y.Zb,{className:"p-6 sticky top-20",children:[(0,r.jsxs)("div",{className:"mb-6 pb-4 border-b",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold text-lg",children:(null===(a=h.name)||void 0===a?void 0:a.charAt(0).toUpperCase())||"U"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-bold",children:h.name}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:h.email})]})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(b.Z,{role:h.role,tier:h.tier,size:"sm"})}),(0,r.jsx)(g.Z,{currentRole:h.role}),("admin"===h.role||"superadmin"===h.role||"seller"===h.role)&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(l.default,{href:"/admin",children:(0,r.jsxs)(j.z,{variant:"outline",size:"sm",className:"w-full gap-2 text-purple-600 border-purple-200 hover:bg-purple-50",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"seller"===h.role?"Go to Seller Panel":"Back to Admin Panel"]})})})]}),(0,r.jsxs)("nav",{className:"space-y-2",children:[v.map(e=>{let t=e.icon,a=c===e.href;return(0,r.jsxs)(l.default,{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition ".concat(a?"bg-blue-600 text-white":"hover:bg-gray-100"),children:[(0,r.jsx)(t,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]},e.href)}),(0,r.jsxs)(j.z,{variant:"ghost",className:"w-full justify-start gap-3 px-4 py-3 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:k,children:[(0,r.jsx)(p.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"Logout"})]})]})]})}),(0,r.jsx)("main",{className:"lg:col-span-3",children:i})]})]})}):null}},66070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return n},aY:function(){return o},ll:function(){return c}});var r=a(57437),s=a(2265),l=a(94508);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});c.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});o.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},68428:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]])},32660:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},88997:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},51817:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},83774:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},53417:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},51884:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]])},95805:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},91804:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},99376:function(e,t,a){"use strict";var r=a(35475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[8590,6891,5650,8513,7150,2971,2117,1744],function(){return e(e.s=2293)}),_N_E=e.O()}]);