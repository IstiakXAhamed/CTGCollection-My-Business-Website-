(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1258],{93335:function(e,t,a){Promise.resolve().then(a.bind(a,23381))},23381:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var n=a(57437),r=a(2265),s=a(44794),i=a(62720);let c=(0,a(79205).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);var o=a(51884),l=a(82718),d=a(56439),u=a(94766),f=a(82431),h=a(59196),m=a(18930),p=a(62869),y=a(66070),x=a(35153),g=a(27648);let v={order:s.Z,promo:i.Z,loyalty:c,account:o.Z,chat:l.Z,welcome:d.Z,general:u.Z},k={order:"bg-blue-100 text-blue-600",promo:"bg-purple-100 text-purple-600",loyalty:"bg-yellow-100 text-yellow-600",account:"bg-green-100 text-green-600",chat:"bg-teal-100 text-teal-600",welcome:"bg-orange-100 text-orange-600",general:"bg-gray-100 text-gray-600"},j={order:"Order",promo:"Promotion",loyalty:"Loyalty",account:"Account",chat:"Chat",welcome:"Welcome",general:"General"};function b(){let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[i,c]=(0,r.useState)("all"),{toast:o}=(0,x.pm)();(0,r.useEffect)(()=>{l()},[]);let l=async()=>{s(!0);try{let e=await fetch("/api/notifications",{credentials:"include"});if(e.ok){let a=await e.json();t(a.notifications||[])}}catch(e){console.error("Failed to fetch notifications:",e)}finally{s(!1)}},d=async e=>{try{await fetch("/api/notifications",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationId:e,isRead:!0})}),t(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t))}catch(e){console.error("Failed to mark as read:",e)}},b=async()=>{try{await fetch("/api/notifications",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({markAllRead:!0})}),t(e=>e.map(e=>({...e,isRead:!0}))),o({title:"Success",description:"All notifications marked as read"})}catch(e){console.error("Failed to mark all as read:",e)}},N=async e=>{try{await fetch("/api/notifications",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationId:e})}),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to delete notification:",e)}},w=async()=>{let a=e.filter(e=>e.isRead).map(e=>e.id);if(0!==a.length)try{for(let e of a)await fetch("/api/notifications",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationId:e})});t(e=>e.filter(e=>!e.isRead)),o({title:"Success",description:"Deleted ".concat(a.length," read notifications")})}catch(e){console.error("Failed to delete read notifications:",e)}},Z=e=>{let t=new Date(e),a=(new Date().getTime()-t.getTime())/1e3;return a<60?"Just now":a<3600?"".concat(Math.floor(a/60),"m ago"):a<86400?"".concat(Math.floor(a/3600),"h ago"):a<604800?"".concat(Math.floor(a/86400),"d ago"):t.toLocaleDateString()},T="all"===i?e:"unread"===i?e.filter(e=>!e.isRead):e.filter(e=>e.type===i),M=e.filter(e=>!e.isRead).length,S=["all","unread",...Object.keys(j)];return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Notifications"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:M>0?"".concat(M," unread notification").concat(1!==M?"s":""):"All caught up!"})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(p.z,{variant:"outline",size:"sm",onClick:l,disabled:a,children:[(0,n.jsx)(f.Z,{className:"w-4 h-4 mr-2 ".concat(a?"animate-spin":"")}),"Refresh"]}),M>0&&(0,n.jsxs)(p.z,{variant:"outline",size:"sm",onClick:b,children:[(0,n.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Mark All Read"]}),e.some(e=>e.isRead)&&(0,n.jsxs)(p.z,{variant:"outline",size:"sm",onClick:w,className:"text-red-600",children:[(0,n.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Clear Read"]})]})]}),(0,n.jsx)("div",{className:"flex gap-2 flex-wrap",children:S.map(e=>(0,n.jsx)(p.z,{variant:i===e?"default":"outline",size:"sm",onClick:()=>c(e),className:"capitalize",children:"all"===e?"All":"unread"===e?"Unread":j[e]||e},e))}),(0,n.jsx)("div",{className:"space-y-3",children:a?(0,n.jsx)(y.Zb,{className:"p-8 text-center",children:(0,n.jsxs)("div",{className:"animate-pulse flex flex-col items-center gap-4",children:[(0,n.jsx)(u.Z,{className:"w-12 h-12 text-gray-300"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Loading notifications..."})]})}):0===T.length?(0,n.jsxs)(y.Zb,{className:"p-8 text-center",children:[(0,n.jsx)(u.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"all"===i?"No notifications yet":"No ".concat(i," notifications")})]}):T.map(e=>{let t=v[e.type]||u.Z,a=k[e.type]||k.general;return(0,n.jsx)(y.Zb,{className:"transition-all hover:shadow-md ".concat(e.isRead?"":"border-l-4 border-l-blue-500 bg-blue-50/30"),children:(0,n.jsx)(y.aY,{className:"p-4",children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"p-2 rounded-full ".concat(a),children:(0,n.jsx)(t,{className:"w-5 h-5"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsx)("h3",{className:"font-semibold ".concat(e.isRead?"text-gray-700":"text-blue-900"),children:e.title}),!e.isRead&&(0,n.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground ml-auto",children:Z(e.createdAt)})]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.message}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[e.link&&(0,n.jsx)(g.default,{href:e.link,children:(0,n.jsx)(p.z,{variant:"link",size:"sm",className:"h-auto p-0 text-blue-600",children:"View Details â†’"})}),(0,n.jsxs)("div",{className:"ml-auto flex gap-1",children:[!e.isRead&&(0,n.jsx)(p.z,{variant:"ghost",size:"sm",onClick:()=>d(e.id),className:"text-green-600 hover:text-green-700 h-8",children:(0,n.jsx)(h.Z,{className:"w-4 h-4"})}),(0,n.jsx)(p.z,{variant:"ghost",size:"sm",onClick:()=>N(e.id),className:"text-red-600 hover:text-red-700 h-8",children:(0,n.jsx)(m.Z,{className:"w-4 h-4"})})]})]})]})]})})},e.id)})})]})}},62869:function(e,t,a){"use strict";a.d(t,{d:function(){return o},z:function(){return l}});var n=a(57437),r=a(2265),s=a(37053),i=a(90535),c=a(94508);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:l=!1,...d}=e,u=l?s.g7:"button";return(0,n.jsx)(u,{className:(0,c.cn)(o({variant:r,size:i,className:a})),ref:t,...d})});l.displayName="Button"},66070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return c},SZ:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var n=a(57437),r=a(2265),s=a(94508);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...r})});c.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...r})});l.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},35153:function(e,t,a){"use strict";a.d(t,{pm:function(){return f}});var n=a(2265);let r=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},c=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],l={toasts:[]};function d(e){l=c(l,e),o.forEach(e=>{e(l)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||n()}}}),{id:a,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=n.useState(l);return n.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},94508:function(e,t,a){"use strict";a.d(t,{T4:function(){return i},cn:function(){return s}});var n=a(61994),r=a(53335);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,n.W)(t))}function i(e){return new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0}).format(e)}},94766:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},59196:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]])},56439:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]])},82718:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},44794:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},82431:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},62720:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},18930:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},51884:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(79205).Z)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]])}},function(e){e.O(0,[8590,5650,2971,2117,1744],function(){return e(e.s=93335)}),_N_E=e.O()}]);