(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{71792:function(e,s,t){Promise.resolve().then(t.bind(t,20350))},20350:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var a=t(57437),r=t(2265),i=t(48614),n=t(36891),l=t(51817),d=t(83774),c=t(99397),o=t(32489),u=t(86595),f=t(88893),m=t(30401),h=t(18930),x=t(62869),p=t(95186),g=t(26815),y=t(66070);function v(){let[e,s]=(0,r.useState)([]),[t,v]=(0,r.useState)(!0),[j,b]=(0,r.useState)(!1),[N,w]=(0,r.useState)(null),[C,k]=(0,r.useState)(!1),[D,_]=(0,r.useState)({name:"",phone:"",address:"",city:"",district:"",postalCode:"",isDefault:!1});(0,r.useEffect)(()=>{z()},[]);let z=async()=>{try{let e=await fetch("/api/user/addresses",{credentials:"include"});if(e.ok){let t=await e.json();s(t.addresses||[])}}catch(e){console.error("Failed to fetch addresses:",e)}finally{v(!1)}},A=()=>{_({name:"",phone:"",address:"",city:"",district:"",postalCode:"",isDefault:!1}),b(!1),w(null)},F=e=>{_({name:e.name,phone:e.phone,address:e.address,city:e.city,district:e.district,postalCode:e.postalCode||"",isDefault:e.isDefault}),w(e.id),b(!0)},S=async()=>{k(!0);try{let e=N?{id:N,...D}:D;(await fetch("/api/user/addresses",{method:N?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})).ok&&(await z(),A())}catch(e){console.error("Failed to save address:",e)}finally{k(!1)}},Z=async e=>{if(confirm("Are you sure you want to delete this address?"))try{(await fetch("/api/user/addresses?id=".concat(e),{method:"DELETE",credentials:"include"})).ok&&await z()}catch(e){console.error("Failed to delete address:",e)}},E=async e=>{try{(await fetch("/api/user/addresses",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:e,isDefault:!0})})).ok&&await z()}catch(e){console.error("Failed to set default:",e)}};return t?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(l.Z,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,a.jsx)(d.Z,{className:"w-8 h-8 text-blue-600"}),"Address Book"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your delivery addresses"})]}),(0,a.jsxs)(x.z,{onClick:()=>{A(),b(!0)},className:"gap-2",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),"Add Address"]})]}),(0,a.jsx)(i.M,{children:j&&(0,a.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>A(),children:(0,a.jsxs)(n.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:N?"Edit Address":"Add New Address"}),(0,a.jsx)("button",{onClick:()=>A(),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,a.jsx)(o.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(g._,{htmlFor:"name",children:"Full Name"}),(0,a.jsx)(p.I,{id:"name",value:D.name,onChange:e=>_({...D,name:e.target.value}),placeholder:"John Doe"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g._,{htmlFor:"phone",children:"Phone Number"}),(0,a.jsx)(p.I,{id:"phone",value:D.phone,onChange:e=>_({...D,phone:e.target.value}),placeholder:"+880 1XXXXXXXXX"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g._,{htmlFor:"address",children:"Street Address"}),(0,a.jsx)(p.I,{id:"address",value:D.address,onChange:e=>_({...D,address:e.target.value}),placeholder:"House 12, Road 5, Block A"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(g._,{htmlFor:"city",children:"City"}),(0,a.jsx)(p.I,{id:"city",value:D.city,onChange:e=>_({...D,city:e.target.value}),placeholder:"Dhaka"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g._,{htmlFor:"district",children:"District"}),(0,a.jsx)(p.I,{id:"district",value:D.district,onChange:e=>_({...D,district:e.target.value}),placeholder:"Dhaka"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g._,{htmlFor:"postalCode",children:"Postal Code (Optional)"}),(0,a.jsx)(p.I,{id:"postalCode",value:D.postalCode,onChange:e=>_({...D,postalCode:e.target.value}),placeholder:"1205"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:D.isDefault,onChange:e=>_({...D,isDefault:e.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),(0,a.jsx)("span",{className:"text-sm",children:"Set as default address"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(x.z,{variant:"outline",onClick:()=>A(),className:"flex-1",children:"Cancel"}),(0,a.jsxs)(x.z,{onClick:S,disabled:C,className:"flex-1",children:[C?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin mr-2"}):null,N?"Update":"Save"," Address"]})]})]})]})})}),0===e.length?(0,a.jsxs)(y.Zb,{className:"text-center py-12",children:[(0,a.jsx)(d.Z,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No addresses yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Add your first delivery address"}),(0,a.jsxs)(x.z,{onClick:()=>b(!0),children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Add Address"]})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-5 rounded-xl border-2 relative ".concat(e.isDefault?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"),children:[e.isDefault&&(0,a.jsxs)("span",{className:"absolute top-3 right-3 bg-blue-600 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1",children:[(0,a.jsx)(u.Z,{className:"w-3 h-3",fill:"currentColor"}),"Default"]}),(0,a.jsx)("h3",{className:"font-semibold text-lg mb-1",children:e.name}),(0,a.jsx)("p",{className:"text-gray-600",children:e.phone}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:e.address}),(0,a.jsxs)("p",{className:"text-gray-600",children:[e.city,", ",e.district," ",e.postalCode]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,a.jsxs)(x.z,{size:"sm",variant:"outline",onClick:()=>F(e),children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 mr-1"}),"Edit"]}),!e.isDefault&&(0,a.jsxs)(x.z,{size:"sm",variant:"outline",onClick:()=>E(e.id),children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-1"}),"Set Default"]}),(0,a.jsx)(x.z,{size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50",onClick:()=>Z(e.id),children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})})]})]},e.id))})]})}},62869:function(e,s,t){"use strict";t.d(s,{d:function(){return d},z:function(){return c}});var a=t(57437),r=t(2265),i=t(37053),n=t(90535),l=t(94508);let d=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:c=!1,...o}=e,u=c?i.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(d({variant:r,size:n,className:t})),ref:s,...o})});c.displayName="Button"},66070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},ll:function(){return d}});var a=t(57437),r=t(2265),i=t(94508);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});n.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});d.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},95186:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var a=t(57437),r=t(2265),i=t(94508);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});n.displayName="Input"},26815:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var a=t(57437),r=t(2265),i=t(370),n=t(90535),l=t(94508);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.f,{ref:s,className:(0,l.cn)(d(),t),...r})});c.displayName=i.f.displayName},94508:function(e,s,t){"use strict";t.d(s,{T4:function(){return n},cn:function(){return i}});var a=t(61994),r=t(53335);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}function n(e){return new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0}).format(e)}}},function(e){e.O(0,[8590,6891,3071,2971,2117,1744],function(){return e(e.s=71792)}),_N_E=e.O()}]);