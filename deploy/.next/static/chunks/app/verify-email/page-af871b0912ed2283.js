(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6931],{62639:function(e,t,r){Promise.resolve().then(r.bind(r,8284))},8284:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(57437),a=r(2265),s=r(99376),i=r(36891),c=r(41671),o=r(51817),l=r(89345),u=r(82431),d=r(32660),f=r(62869),m=r(66070),h=r(27648);function x(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)().get("email")||"",[r,x]=(0,a.useState)(["","","","","",""]),[g,p]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),[k,Z]=(0,a.useState)(0),C=(0,a.useRef)([]);(0,a.useEffect)(()=>{if(k>0){let e=setTimeout(()=>Z(k-1),1e3);return()=>clearTimeout(e)}},[k]);let P=(e,t)=>{if(!/^\d*$/.test(t))return;let n=[...r];if(n[e]=t.slice(-1),x(n),j(""),t&&e<5){var a;null===(a=C.current[e+1])||void 0===a||a.focus()}if(5===e&&t){let e=n.join("");6===e.length&&S(e)}},R=(e,t)=>{if("Backspace"===t.key&&!r[e]&&e>0){var n;null===(n=C.current[e-1])||void 0===n||n.focus()}},S=async r=>{if(!t){j("Email is required. Please go back to registration.");return}p(!0),j("");try{let a=await fetch("/api/auth/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,code:r})}),s=await a.json();if(a.ok)w(!0),setTimeout(()=>{e.push("/login?verified=true")},2e3);else{var n;j(s.message||"Verification failed"),x(["","","","","",""]),null===(n=C.current[0])||void 0===n||n.focus()}}catch(e){j("Network error. Please try again.")}finally{p(!1)}},E=async()=>{if(t&&!(k>0)){b(!0),j("");try{let r=await fetch("/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),n=await r.json();if(r.ok){var e;Z(60),x(["","","","","",""]),null===(e=C.current[0])||void 0===e||e.focus()}else j(n.message||"Failed to resend code")}catch(e){j("Network error. Please try again.")}finally{b(!1)}}};return N?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-50 p-4",children:(0,n.jsxs)(i.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:[(0,n.jsx)(c.Z,{className:"w-24 h-24 text-green-500 mx-auto mb-6"}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-green-600 mb-2",children:"Email Verified!"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"Redirecting you to login..."}),(0,n.jsx)(o.Z,{className:"w-6 h-6 animate-spin mx-auto text-blue-600"})]})}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4",children:(0,n.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:(0,n.jsxs)(m.Zb,{className:"shadow-xl",children:[(0,n.jsxs)(m.Ol,{className:"text-center pb-2",children:[(0,n.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)(l.Z,{className:"w-8 h-8 text-blue-600"})}),(0,n.jsx)(m.ll,{className:"text-2xl",children:"Verify Your Email"}),(0,n.jsxs)("p",{className:"text-muted-foreground mt-2",children:["We sent a 6-digit code to",(0,n.jsx)("br",{}),(0,n.jsx)("span",{className:"font-semibold text-foreground",children:t||"your email"})]})]}),(0,n.jsxs)(m.aY,{className:"space-y-6",children:[(0,n.jsx)("div",{className:"flex justify-center gap-2",onPaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);6===t.length&&(x(t.split("")),S(t))},children:r.map((e,t)=>(0,n.jsx)("input",{ref:e=>{C.current[t]=e},type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>P(t,e.target.value),onKeyDown:e=>R(t,e),className:"w-12 h-14 text-center text-2xl font-bold border-2 rounded-lg \n                    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\n                    ".concat(v?"border-red-500":"border-gray-200","\n                    ").concat(e?"bg-blue-50 border-blue-300":"bg-white"),disabled:g},t))}),v&&(0,n.jsx)(i.E.p,{initial:{opacity:0},animate:{opacity:1},className:"text-center text-red-500 text-sm",children:v}),(0,n.jsx)(f.z,{onClick:()=>S(r.join("")),disabled:g||r.some(e=>!e),className:"w-full h-12 text-lg",children:g?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{className:"w-5 h-5 mr-2 animate-spin"}),"Verifying..."]}):"Verify Email"}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Didn't receive the code?"}),(0,n.jsx)(f.z,{variant:"ghost",onClick:E,disabled:y||k>0,className:"text-blue-600",children:y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):k>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Resend in ",k,"s"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Resend Code"]})})]}),(0,n.jsx)("div",{className:"text-center pt-4 border-t",children:(0,n.jsxs)(h.default,{href:"/register",className:"text-sm text-muted-foreground hover:text-foreground flex items-center justify-center gap-1",children:[(0,n.jsx)(d.Z,{className:"w-4 h-4"}),"Back to Registration"]})})]})]})})})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return l}});var n=r(57437),a=r(2265),s=r(37053),i=r(90535),c=r(94508);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:l=!1,...u}=e,d=l?s.g7:"button";return(0,n.jsx)(d,{className:(0,c.cn)(o({variant:a,size:i,className:r})),ref:t,...u})});l.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return c},SZ:function(){return l},Zb:function(){return i},aY:function(){return u},ll:function(){return o}});var n=r(57437),a=r(2265),s=r(94508);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});c.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});l.displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});u.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},94508:function(e,t,r){"use strict";r.d(t,{T4:function(){return i},cn:function(){return s}});var n=r(61994),a=r(53335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function i(e){return new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0}).format(e)}},32660:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},41671:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},89345:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},82431:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[8590,6891,5650,2971,2117,1744],function(){return e(e.s=62639)}),_N_E=e.O()}]);