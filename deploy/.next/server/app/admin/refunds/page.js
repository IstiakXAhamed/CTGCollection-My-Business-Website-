(()=>{var e={};e.id=8621,e.ids=[8621],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},36129:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>l}),s(23377),s(90596),s(81027),s(35866);var a=s(23191),r=s(88716),n=s(37922),i=s.n(n),d=s(95231),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(t,o);let l=["",{children:["admin",{children:["refunds",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23377)),"C:\\Users\\samia\\Desktop\\Learning Journey\\HostNin\\SilkMartWebSite\\app\\admin\\refunds\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,90596)),"C:\\Users\\samia\\Desktop\\Learning Journey\\HostNin\\SilkMartWebSite\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,81027)),"C:\\Users\\samia\\Desktop\\Learning Journey\\HostNin\\SilkMartWebSite\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\samia\\Desktop\\Learning Journey\\HostNin\\SilkMartWebSite\\app\\admin\\refunds\\page.tsx"],m="/admin/refunds/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/refunds/page",pathname:"/admin/refunds",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},35099:(e,t,s)=>{Promise.resolve().then(s.bind(s,64595))},64595:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(10326),r=s(17577),n=s(33071),i=s(90772),d=s(567),o=s(60097),l=s(31048),c=s(87673),m=s(62288),u=s(77863),p=s(77506),f=s(12591),x=s(71709),g=s(39447),h=s(94215);function y(){let{toast:e}=(0,h.pm)(),[t,s]=(0,r.useState)(!0),[y,j]=(0,r.useState)([]),[b,N]=(0,r.useState)("all"),[v,w]=(0,r.useState)(null),[k,C]=(0,r.useState)(""),[R,_]=(0,r.useState)(""),[z,S]=(0,r.useState)(!1),Z=async()=>{try{s(!0);let e=await fetch(`/api/admin/refunds?status=${b}`);if(e.ok){let t=await e.json();j(t.refunds||[])}}finally{s(!1)}},q=(e,t)=>{w(e),C(t),_("")},P=async()=>{if(v&&k){S(!0);try{(await fetch("/api/admin/refunds",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v.id,action:k,note:R})})).ok?(e({title:"Success",description:`Refund request ${k}ed successfully`}),Z(),w(null)):e({title:"Failed",variant:"destructive"})}catch(t){e({title:"Error",variant:"destructive"})}finally{S(!1)}}},D=e=>{switch(e){case"refunded":return"bg-green-100 text-green-700";case"approved":return"bg-blue-100 text-blue-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-orange-100 text-orange-700"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Refund Requests"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage customer return and refund requests"})]}),a.jsx("div",{className:"flex items-center gap-2 bg-white p-1 rounded-lg border",children:["all","pending","approved","refunded","rejected"].map(e=>a.jsx("button",{onClick:()=>N(e),className:`px-3 py-1.5 text-sm rounded-md capitalize transition ${b===e?"bg-gray-100 font-medium text-gray-900":"text-gray-500 hover:text-gray-700"}`,children:e},e))})]}),a.jsx(n.Zb,{children:a.jsx(n.aY,{className:"p-0",children:t?a.jsx("div",{className:"p-12 flex justify-center",children:a.jsx(p.Z,{className:"animate-spin text-gray-400"})}):0===y.length?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"No requests found"}):a.jsx("div",{className:"divide-y",children:y.map(e=>(0,a.jsxs)("div",{className:"p-4 flex flex-col sm:flex-row gap-4 items-start sm:items-center hover:bg-gray-50 transition",children:[a.jsx("div",{className:`p-2 rounded-full hidden sm:block ${D(e.status)}`,children:a.jsx(f.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("p",{className:"font-semibold text-gray-900 truncate",children:["Order #",e.order?.orderNumber]}),a.jsx("span",{className:"sm:hidden text-sm font-bold",children:(0,u.T4)(e.amount)})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 truncate",children:["Customer: ",e.user?.name," (",e.user?.email,")"]}),(0,a.jsxs)("div",{className:"mt-2 text-sm bg-gray-100 p-2 rounded-md",children:[a.jsx("span",{className:"font-semibold text-xs text-gray-500 uppercase block mb-1",children:"Reason:"}),e.reason]}),e.images&&"[]"!==e.images&&a.jsx("div",{className:"mt-2 flex gap-2",children:(0,a.jsxs)(d.C,{variant:"outline",className:"text-xs",children:[a.jsx(x.Z,{className:"w-3 h-3 mr-1"})," Check Images"]})})]}),(0,a.jsxs)("div",{className:"hidden sm:block text-right",children:[a.jsx("p",{className:"font-bold text-lg",children:(0,u.T4)(e.amount)}),a.jsx(d.C,{className:`capitalize mt-1 ${D(e.status)} hover:bg-opacity-80`,children:e.status})]}),(0,a.jsxs)("div",{className:"flex sm:hidden items-center justify-between w-full mt-2 pt-2 border-t",children:[a.jsx(d.C,{className:`capitalize ${D(e.status)}`,children:e.status}),"pending"===e.status&&a.jsx(i.z,{size:"sm",variant:"outline",onClick:()=>q(e,"approve"),children:"Review"})]}),a.jsx("div",{className:"hidden sm:block",children:(0,a.jsxs)(o.h_,{children:[a.jsx(o.$F,{asChild:!0,children:a.jsx(i.z,{variant:"ghost",size:"icon",children:a.jsx(g.Z,{className:"w-4 h-4"})})}),(0,a.jsxs)(o.AW,{align:"end",children:[a.jsx(o.Ju,{children:"Actions"}),a.jsx(o.VD,{}),"pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(o.Xi,{onClick:()=>q(e,"approve"),children:"Approve Request"}),a.jsx(o.Xi,{onClick:()=>q(e,"reject"),className:"text-red-600",children:"Reject Request"})]}),"approved"===e.status&&a.jsx(o.Xi,{onClick:()=>q(e,"refund_processed"),children:"Mark Refunded"}),a.jsx(o.Xi,{onClick:()=>navigator.clipboard.writeText(e.orderId),children:"Copy Order ID"})]})]})})]},e.id))})})}),a.jsx(m.Vq,{open:!!v,onOpenChange:e=>!e&&w(null),children:(0,a.jsxs)(m.cZ,{children:[(0,a.jsxs)(m.fK,{children:[(0,a.jsxs)(m.$N,{className:"capitalize",children:[k&&k.replace("_"," ")," Request"]}),a.jsx(m.Be,{children:"approve"===k?"Approve this refund? This does not auto-refund money, but marks it as Valid.":"refund_processed"===k?"Confirm that you have processed the refund transaction?":"Reject this refund request?"})]}),(0,a.jsxs)("div",{className:"py-2",children:[a.jsx(l._,{children:"Admin Note (Optional)"}),a.jsx(c.g,{value:R,onChange:e=>_(e.target.value),placeholder:"Reason or transaction ref...",className:"mt-2"})]}),(0,a.jsxs)(m.cN,{children:[a.jsx(i.z,{variant:"outline",onClick:()=>w(null),children:"Cancel"}),(0,a.jsxs)(i.z,{onClick:P,disabled:z,variant:"reject"===k?"destructive":"default",className:"refund_processed"===k?"bg-green-600 hover:bg-green-700":"",children:[z&&a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Confirm"]})]})]})})]})}},567:(e,t,s)=>{"use strict";s.d(t,{C:()=>d});var a=s(10326);s(17577);var r=s(79360),n=s(77863);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,...s}){return a.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},62288:(e,t,s)=>{"use strict";s.d(t,{$N:()=>x,Be:()=>g,Vq:()=>o,cN:()=>f,cZ:()=>u,fK:()=>p,hg:()=>l});var a=s(10326),r=s(17577),n=s(37956),i=s(94019),d=s(77863);let o=n.fC,l=n.xz,c=n.h_;n.x8;let m=r.forwardRef(({className:e,...t},s)=>a.jsx(n.aV,{ref:s,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));m.displayName=n.aV.displayName;let u=r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(c,{children:[a.jsx(m,{}),(0,a.jsxs)(n.VY,{ref:r,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(i.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));u.displayName=n.VY.displayName;let p=({className:e,...t})=>a.jsx("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});p.displayName="DialogHeader";let f=({className:e,...t})=>a.jsx("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});f.displayName="DialogFooter";let x=r.forwardRef(({className:e,...t},s)=>a.jsx(n.Dx,{ref:s,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));x.displayName=n.Dx.displayName;let g=r.forwardRef(({className:e,...t},s)=>a.jsx(n.dk,{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",e),...t}));g.displayName=n.dk.displayName},60097:(e,t,s)=>{"use strict";s.d(t,{$F:()=>m,AW:()=>u,Ju:()=>f,VD:()=>x,Xi:()=>p,h_:()=>c});var a=s(10326),r=s(17577),n=s(75432),i=s(39183),d=s(32933),o=s(53982),l=s(77863);let c=n.fC,m=n.xz;n.ZA,n.Uv,n.Tr,n.Ee,r.forwardRef(({className:e,inset:t,children:s,...r},d)=>(0,a.jsxs)(n.fF,{ref:d,className:(0,l.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[s,a.jsx(i.Z,{className:"ml-auto h-4 w-4"})]})).displayName=n.fF.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(n.tu,{ref:s,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=n.tu.displayName;let u=r.forwardRef(({className:e,sideOffset:t=4,...s},r)=>a.jsx(n.Uv,{children:a.jsx(n.VY,{ref:r,sideOffset:t,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));u.displayName=n.VY.displayName;let p=r.forwardRef(({className:e,inset:t,...s},r)=>a.jsx(n.ck,{ref:r,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));p.displayName=n.ck.displayName,r.forwardRef(({className:e,children:t,checked:s,...r},i)=>(0,a.jsxs)(n.oC,{ref:i,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(n.wU,{children:a.jsx(d.Z,{className:"h-4 w-4"})})}),t]})).displayName=n.oC.displayName,r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(n.Rk,{ref:r,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(n.wU,{children:a.jsx(o.Z,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=n.Rk.displayName;let f=r.forwardRef(({className:e,inset:t,...s},r)=>a.jsx(n.__,{ref:r,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s}));f.displayName=n.__.displayName;let x=r.forwardRef(({className:e,...t},s)=>a.jsx(n.Z0,{ref:s,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));x.displayName=n.Z0.displayName},31048:(e,t,s)=>{"use strict";s.d(t,{_:()=>l});var a=s(10326),r=s(17577),n=s(29152),i=s(79360),d=s(77863);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=r.forwardRef(({className:e,...t},s)=>a.jsx(n.f,{ref:s,className:(0,d.cn)(o(),e),...t}));l.displayName=n.f.displayName},87673:(e,t,s)=>{"use strict";s.d(t,{g:()=>i});var a=s(10326),r=s(17577),n=s(77863);let i=r.forwardRef(({className:e,...t},s)=>a.jsx("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));i.displayName="Textarea"},71709:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},12591:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]])},23377:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`C:\Users\samia\Desktop\Learning Journey\HostNin\SilkMartWebSite\app\admin\refunds\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,717,7956,7239,944,8777],()=>s(36129));module.exports=a})();