(()=>{var e={};e.id=1258,e.ids=[1258],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},65172:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>h,pages:()=>c,routeModule:()=>m,tree:()=>d}),a(16789),a(13321),a(81027),a(35866);var s=a(23191),i=a(88716),r=a(37922),n=a.n(r),l=a(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["dashboard",{children:["notifications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,16789)),"C:\\Users\\samia\\Desktop\\Learning Journey\\HostNin\\SilkMartWebSite\\app\\dashboard\\notifications\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,13321)),"C:\\Users\\samia\\Desktop\\Learning Journey\\HostNin\\SilkMartWebSite\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,81027)),"C:\\Users\\samia\\Desktop\\Learning Journey\\HostNin\\SilkMartWebSite\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\samia\\Desktop\\Learning Journey\\HostNin\\SilkMartWebSite\\app\\dashboard\\notifications\\page.tsx"],h="/dashboard/notifications/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dashboard/notifications/page",pathname:"/dashboard/notifications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},17512:(e,t,a)=>{Promise.resolve().then(a.bind(a,15272))},15272:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(10326),i=a(17577),r=a(48705),n=a(40765);let l=(0,a(62881).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);var o=a(8798),d=a(39730),c=a(52679),h=a(6507),p=a(21405),m=a(67211),u=a(98091),x=a(90772),y=a(33071),f=a(94215),g=a(90434);let k={order:r.Z,promo:n.Z,loyalty:l,account:o.Z,chat:d.Z,welcome:c.Z,general:h.Z},j={order:"bg-blue-100 text-blue-600",promo:"bg-purple-100 text-purple-600",loyalty:"bg-yellow-100 text-yellow-600",account:"bg-green-100 text-green-600",chat:"bg-teal-100 text-teal-600",welcome:"bg-orange-100 text-orange-600",general:"bg-gray-100 text-gray-600"},b={order:"Order",promo:"Promotion",loyalty:"Loyalty",account:"Account",chat:"Chat",welcome:"Welcome",general:"General"};function v(){let[e,t]=(0,i.useState)([]),[a,r]=(0,i.useState)(!0),[n,l]=(0,i.useState)("all"),{toast:o}=(0,f.pm)(),d=async()=>{r(!0);try{let e=await fetch("/api/notifications",{credentials:"include"});if(e.ok){let a=await e.json();t(a.notifications||[])}}catch(e){console.error("Failed to fetch notifications:",e)}finally{r(!1)}},c=async e=>{try{await fetch("/api/notifications",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationId:e,isRead:!0})}),t(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t))}catch(e){console.error("Failed to mark as read:",e)}},v=async()=>{try{await fetch("/api/notifications",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({markAllRead:!0})}),t(e=>e.map(e=>({...e,isRead:!0}))),o({title:"Success",description:"All notifications marked as read"})}catch(e){console.error("Failed to mark all as read:",e)}},N=async e=>{try{await fetch("/api/notifications",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationId:e})}),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to delete notification:",e)}},w=async()=>{let a=e.filter(e=>e.isRead).map(e=>e.id);if(0!==a.length)try{for(let e of a)await fetch("/api/notifications",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notificationId:e})});t(e=>e.filter(e=>!e.isRead)),o({title:"Success",description:`Deleted ${a.length} read notifications`})}catch(e){console.error("Failed to delete read notifications:",e)}},M=e=>{let t=new Date(e),a=(new Date().getTime()-t.getTime())/1e3;return a<60?"Just now":a<3600?`${Math.floor(a/60)}m ago`:a<86400?`${Math.floor(a/3600)}h ago`:a<604800?`${Math.floor(a/86400)}d ago`:t.toLocaleDateString()},Z="all"===n?e:"unread"===n?e.filter(e=>!e.isRead):e.filter(e=>e.type===n),C=e.filter(e=>!e.isRead).length,S=["all","unread",...Object.keys(b)];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Notifications"}),s.jsx("p",{className:"text-muted-foreground",children:C>0?`${C} unread notification${1!==C?"s":""}`:"All caught up!"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(x.z,{variant:"outline",size:"sm",onClick:d,disabled:a,children:[s.jsx(p.Z,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]}),C>0&&(0,s.jsxs)(x.z,{variant:"outline",size:"sm",onClick:v,children:[s.jsx(m.Z,{className:"w-4 h-4 mr-2"}),"Mark All Read"]}),e.some(e=>e.isRead)&&(0,s.jsxs)(x.z,{variant:"outline",size:"sm",onClick:w,className:"text-red-600",children:[s.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Clear Read"]})]})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:S.map(e=>s.jsx(x.z,{variant:n===e?"default":"outline",size:"sm",onClick:()=>l(e),className:"capitalize",children:"all"===e?"All":"unread"===e?"Unread":b[e]||e},e))}),s.jsx("div",{className:"space-y-3",children:a?s.jsx(y.Zb,{className:"p-8 text-center",children:(0,s.jsxs)("div",{className:"animate-pulse flex flex-col items-center gap-4",children:[s.jsx(h.Z,{className:"w-12 h-12 text-gray-300"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading notifications..."})]})}):0===Z.length?(0,s.jsxs)(y.Zb,{className:"p-8 text-center",children:[s.jsx(h.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"all"===n?"No notifications yet":`No ${n} notifications`})]}):Z.map(e=>{let t=k[e.type]||h.Z,a=j[e.type]||j.general;return s.jsx(y.Zb,{className:`transition-all hover:shadow-md ${e.isRead?"":"border-l-4 border-l-blue-500 bg-blue-50/30"}`,children:s.jsx(y.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-full ${a}`,children:s.jsx(t,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:`font-semibold ${e.isRead?"text-gray-700":"text-blue-900"}`,children:e.title}),!e.isRead&&s.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:M(e.createdAt)})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.message}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.link&&s.jsx(g.default,{href:e.link,children:s.jsx(x.z,{variant:"link",size:"sm",className:"h-auto p-0 text-blue-600",children:"View Details â†’"})}),(0,s.jsxs)("div",{className:"ml-auto flex gap-1",children:[!e.isRead&&s.jsx(x.z,{variant:"ghost",size:"sm",onClick:()=>c(e.id),className:"text-green-600 hover:text-green-700 h-8",children:s.jsx(m.Z,{className:"w-4 h-4"})}),s.jsx(x.z,{variant:"ghost",size:"sm",onClick:()=>N(e.id),className:"text-red-600 hover:text-red-700 h-8",children:s.jsx(u.Z,{className:"w-4 h-4"})})]})]})]})]})})},e.id)})})]})}},97147:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]])},86333:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},77506:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},40617:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},21405:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8798:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]])},24061:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},16671:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},16789:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`C:\Users\samia\Desktop\Learning Journey\HostNin\SilkMartWebSite\app\dashboard\notifications\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,717,944,4048],()=>a(65172));module.exports=s})();