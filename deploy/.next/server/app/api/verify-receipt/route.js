"use strict";(()=>{var e={};e.id=1933,e.ids=[1933,7356],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},64061:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>F,patchFetch:()=>T,requestAsyncStorage:()=>w,routeModule:()=>_,serverHooks:()=>z,staticGenerationAsyncStorage:()=>L});var s={};i.r(s),i.d(s,{GET:()=>k});var r=i(49303),a=i(88716),o=i(60670),n=i(87070),h=i(72331);let l="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,d=new Set,c="object"==typeof process&&process?process:{},u=(e,t,i,s)=>{"function"==typeof c.emitWarning?c.emitWarning(e,t,i,s):console.error(`[${i}] ${t}: ${e}`)},f=globalThis.AbortController,p=globalThis.AbortSignal;if(void 0===f){p=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},f=class{constructor(){t()}signal=new p;abort(e){if(!this.signal.aborted){for(let t of(this.signal.reason=e,this.signal.aborted=!0,this.signal._onabort))t(e);this.signal.onabort?.(e)}}};let e=c.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,u("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}let g=e=>!d.has(e);Symbol("type");let v=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),y=e=>v(e)?e<=256?Uint8Array:e<=65536?Uint16Array:e<=4294967296?Uint32Array:e<=Number.MAX_SAFE_INTEGER?m:null:null;class m extends Array{constructor(e){super(e),this.fill(0)}}class S{heap;length;static #e=!1;static create(e){let t=y(e);if(!t)return[];S.#e=!0;let i=new S(e,t);return S.#e=!1,i}constructor(e,t){if(!S.#e)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class b{#t;#i;#s;#r;#a;#o;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#h;#l;#d;#c;#u;#f;#p;#g;#v;#y;#m;#S;#b;#x;#A;#k;static unsafeExposeInternals(e){return{starts:e.#S,ttls:e.#b,sizes:e.#m,keyMap:e.#l,keyList:e.#d,valList:e.#c,next:e.#u,prev:e.#f,get head(){return e.#p},get tail(){return e.#g},free:e.#v,isBackgroundFetch:t=>e.#_(t),backgroundFetch:(t,i,s,r)=>e.#w(t,i,s,r),moveToTail:t=>e.#L(t),indexes:t=>e.#z(t),rindexes:t=>e.#F(t),isStale:t=>e.#T(t)}}get max(){return this.#t}get maxSize(){return this.#i}get calculatedSize(){return this.#h}get size(){return this.#n}get fetchMethod(){return this.#a}get memoMethod(){return this.#o}get dispose(){return this.#s}get disposeAfter(){return this.#r}constructor(e){let{max:t=0,ttl:i,ttlResolution:s=1,ttlAutopurge:r,updateAgeOnGet:a,updateAgeOnHas:o,allowStale:n,dispose:h,disposeAfter:l,noDisposeOnSet:c,noUpdateTTL:f,maxSize:p=0,maxEntrySize:m=0,sizeCalculation:x,fetchMethod:A,memoMethod:k,noDeleteOnFetchRejection:_,noDeleteOnStaleGet:w,allowStaleOnFetchRejection:L,allowStaleOnFetchAbort:z,ignoreFetchAbort:F}=e;if(0!==t&&!v(t))throw TypeError("max option must be a nonnegative integer");let T=t?y(t):Array;if(!T)throw Error("invalid max value: "+t);if(this.#t=t,this.#i=p,this.maxEntrySize=m||this.#i,this.sizeCalculation=x,this.sizeCalculation){if(!this.#i&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==k&&"function"!=typeof k)throw TypeError("memoMethod must be a function if defined");if(this.#o=k,void 0!==A&&"function"!=typeof A)throw TypeError("fetchMethod must be a function if specified");if(this.#a=A,this.#A=!!A,this.#l=new Map,this.#d=Array(t).fill(void 0),this.#c=Array(t).fill(void 0),this.#u=new T(t),this.#f=new T(t),this.#p=0,this.#g=0,this.#v=S.create(t),this.#n=0,this.#h=0,"function"==typeof h&&(this.#s=h),"function"==typeof l?(this.#r=l,this.#y=[]):(this.#r=void 0,this.#y=void 0),this.#x=!!this.#s,this.#k=!!this.#r,this.noDisposeOnSet=!!c,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!_,this.allowStaleOnFetchRejection=!!L,this.allowStaleOnFetchAbort=!!z,this.ignoreFetchAbort=!!F,0!==this.maxEntrySize){if(0!==this.#i&&!v(this.#i))throw TypeError("maxSize must be a positive integer if specified");if(!v(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#R()}if(this.allowStale=!!n,this.noDeleteOnStaleGet=!!w,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!o,this.ttlResolution=v(s)||0===s?s:1,this.ttlAutopurge=!!r,this.ttl=i||0,this.ttl){if(!v(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#E()}if(0===this.#t&&0===this.ttl&&0===this.#i)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#i){let e="LRU_CACHE_UNBOUNDED";g(e)&&(d.add(e),u("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,b))}}getRemainingTTL(e){return this.#l.has(e)?1/0:0}#E(){let e=new m(this.#t),t=new m(this.#t);this.#b=e,this.#S=t,this.#C=(i,s,r=l.now())=>{if(t[i]=0!==s?r:0,e[i]=s,0!==s&&this.ttlAutopurge){let e=setTimeout(()=>{this.#T(i)&&this.#O(this.#d[i],"expire")},s+1);e.unref&&e.unref()}},this.#M=i=>{t[i]=0!==e[i]?l.now():0},this.#D=(r,a)=>{if(e[a]){let o=e[a],n=t[a];if(!o||!n)return;r.ttl=o,r.start=n,r.now=i||s();let h=r.now-n;r.remainingTTL=o-h}};let i=0,s=()=>{let e=l.now();if(this.ttlResolution>0){i=e;let t=setTimeout(()=>i=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=r=>{let a=this.#l.get(r);if(void 0===a)return 0;let o=e[a],n=t[a];return o&&n?o-((i||s())-n):1/0},this.#T=r=>{let a=t[r],o=e[r];return!!o&&!!a&&(i||s())-a>o}}#M=()=>{};#D=()=>{};#C=()=>{};#T=()=>!1;#R(){let e=new m(this.#t);this.#h=0,this.#m=e,this.#j=t=>{this.#h-=e[t],e[t]=0},this.#P=(e,t,i,s)=>{if(this.#_(t))return 0;if(!v(i)){if(s){if("function"!=typeof s)throw TypeError("sizeCalculation must be a function");if(!v(i=s(t,e)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.")}return i},this.#W=(t,i,s)=>{if(e[t]=i,this.#i){let i=this.#i-e[t];for(;this.#h>i;)this.#I(!0)}this.#h+=e[t],s&&(s.entrySize=i,s.totalCalculatedSize=this.#h)}}#j=e=>{};#W=(e,t,i)=>{};#P=(e,t,i,s)=>{if(i||s)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#z({allowStale:e=this.allowStale}={}){if(this.#n)for(let t=this.#g;this.#q(t)&&((e||!this.#T(t))&&(yield t),t!==this.#p);)t=this.#f[t]}*#F({allowStale:e=this.allowStale}={}){if(this.#n)for(let t=this.#p;this.#q(t)&&((e||!this.#T(t))&&(yield t),t!==this.#g);)t=this.#u[t]}#q(e){return void 0!==e&&this.#l.get(this.#d[e])===e}*entries(){for(let e of this.#z())void 0===this.#c[e]||void 0===this.#d[e]||this.#_(this.#c[e])||(yield[this.#d[e],this.#c[e]])}*rentries(){for(let e of this.#F())void 0===this.#c[e]||void 0===this.#d[e]||this.#_(this.#c[e])||(yield[this.#d[e],this.#c[e]])}*keys(){for(let e of this.#z()){let t=this.#d[e];void 0===t||this.#_(this.#c[e])||(yield t)}}*rkeys(){for(let e of this.#F()){let t=this.#d[e];void 0===t||this.#_(this.#c[e])||(yield t)}}*values(){for(let e of this.#z())void 0===this.#c[e]||this.#_(this.#c[e])||(yield this.#c[e])}*rvalues(){for(let e of this.#F())void 0===this.#c[e]||this.#_(this.#c[e])||(yield this.#c[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let i of this.#z()){let s=this.#c[i],r=this.#_(s)?s.__staleWhileFetching:s;if(void 0!==r&&e(r,this.#d[i],this))return this.get(this.#d[i],t)}}forEach(e,t=this){for(let i of this.#z()){let s=this.#c[i],r=this.#_(s)?s.__staleWhileFetching:s;void 0!==r&&e.call(t,r,this.#d[i],this)}}rforEach(e,t=this){for(let i of this.#F()){let s=this.#c[i],r=this.#_(s)?s.__staleWhileFetching:s;void 0!==r&&e.call(t,r,this.#d[i],this)}}purgeStale(){let e=!1;for(let t of this.#F({allowStale:!0}))this.#T(t)&&(this.#O(this.#d[t],"expire"),e=!0);return e}info(e){let t=this.#l.get(e);if(void 0===t)return;let i=this.#c[t],s=this.#_(i)?i.__staleWhileFetching:i;if(void 0===s)return;let r={value:s};if(this.#b&&this.#S){let e=this.#b[t],i=this.#S[t];if(e&&i){let t=e-(l.now()-i);r.ttl=t,r.start=Date.now()}}return this.#m&&(r.size=this.#m[t]),r}dump(){let e=[];for(let t of this.#z({allowStale:!0})){let i=this.#d[t],s=this.#c[t],r=this.#_(s)?s.__staleWhileFetching:s;if(void 0===r||void 0===i)continue;let a={value:r};if(this.#b&&this.#S){a.ttl=this.#b[t];let e=l.now()-this.#S[t];a.start=Math.floor(Date.now()-e)}this.#m&&(a.size=this.#m[t]),e.unshift([i,a])}return e}load(e){for(let[t,i]of(this.clear(),e)){if(i.start){let e=Date.now()-i.start;i.start=l.now()-e}this.set(t,i.value,i)}}set(e,t,i={}){if(void 0===t)return this.delete(e),this;let{ttl:s=this.ttl,start:r,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:n}=i,{noUpdateTTL:h=this.noUpdateTTL}=i,l=this.#P(e,t,i.size||0,o);if(this.maxEntrySize&&l>this.maxEntrySize)return n&&(n.set="miss",n.maxEntrySizeExceeded=!0),this.#O(e,"set"),this;let d=0===this.#n?void 0:this.#l.get(e);if(void 0===d)d=0===this.#n?this.#g:0!==this.#v.length?this.#v.pop():this.#n===this.#t?this.#I(!1):this.#n,this.#d[d]=e,this.#c[d]=t,this.#l.set(e,d),this.#u[this.#g]=d,this.#f[d]=this.#g,this.#g=d,this.#n++,this.#W(d,l,n),n&&(n.set="add"),h=!1;else{this.#L(d);let i=this.#c[d];if(t!==i){if(this.#A&&this.#_(i)){i.__abortController.abort(Error("replaced"));let{__staleWhileFetching:t}=i;void 0!==t&&!a&&(this.#x&&this.#s?.(t,e,"set"),this.#k&&this.#y?.push([t,e,"set"]))}else!a&&(this.#x&&this.#s?.(i,e,"set"),this.#k&&this.#y?.push([i,e,"set"]));if(this.#j(d),this.#W(d,l,n),this.#c[d]=t,n){n.set="replace";let e=i&&this.#_(i)?i.__staleWhileFetching:i;void 0!==e&&(n.oldValue=e)}}else n&&(n.set="update")}if(0===s||this.#b||this.#E(),this.#b&&(h||this.#C(d,s,r),n&&this.#D(n,d)),!a&&this.#k&&this.#y){let e;let t=this.#y;for(;e=t?.shift();)this.#r?.(...e)}return this}pop(){try{for(;this.#n;){let e=this.#c[this.#p];if(this.#I(!0),this.#_(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#k&&this.#y){let e;let t=this.#y;for(;e=t?.shift();)this.#r?.(...e)}}}#I(e){let t=this.#p,i=this.#d[t],s=this.#c[t];return this.#A&&this.#_(s)?s.__abortController.abort(Error("evicted")):(this.#x||this.#k)&&(this.#x&&this.#s?.(s,i,"evict"),this.#k&&this.#y?.push([s,i,"evict"])),this.#j(t),e&&(this.#d[t]=void 0,this.#c[t]=void 0,this.#v.push(t)),1===this.#n?(this.#p=this.#g=0,this.#v.length=0):this.#p=this.#u[t],this.#l.delete(i),this.#n--,t}has(e,t={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:s}=t,r=this.#l.get(e);if(void 0!==r){let e=this.#c[r];if(this.#_(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#T(r))return i&&this.#M(r),s&&(s.has="hit",this.#D(s,r)),!0;s&&(s.has="stale",this.#D(s,r))}else s&&(s.has="miss");return!1}peek(e,t={}){let{allowStale:i=this.allowStale}=t,s=this.#l.get(e);if(void 0===s||!i&&this.#T(s))return;let r=this.#c[s];return this.#_(r)?r.__staleWhileFetching:r}#w(e,t,i,s){let r=void 0===t?void 0:this.#c[t];if(this.#_(r))return r;let a=new f,{signal:o}=i;o?.addEventListener("abort",()=>a.abort(o.reason),{signal:a.signal});let n={signal:a.signal,options:i,context:s},h=(s,r=!1)=>{let{aborted:o}=a.signal,h=i.ignoreFetchAbort&&void 0!==s;return(i.status&&(o&&!r?(i.status.fetchAborted=!0,i.status.fetchError=a.signal.reason,h&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),!o||h||r)?(this.#c[t]===d&&(void 0===s?d.__staleWhileFetching?this.#c[t]=d.__staleWhileFetching:this.#O(e,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(e,s,n.options))),s):l(a.signal.reason)},l=s=>{let{aborted:r}=a.signal,o=r&&i.allowStaleOnFetchAbort,n=o||i.allowStaleOnFetchRejection,h=n||i.noDeleteOnFetchRejection;if(this.#c[t]!==d||(h&&void 0!==d.__staleWhileFetching?o||(this.#c[t]=d.__staleWhileFetching):this.#O(e,"fetch")),n)return i.status&&void 0!==d.__staleWhileFetching&&(i.status.returnedStale=!0),d.__staleWhileFetching;if(d.__returned===d)throw s};i.status&&(i.status.fetchDispatched=!0);let d=new Promise((t,s)=>{let o=this.#a?.(e,r,n);o&&o instanceof Promise&&o.then(e=>t(void 0===e?void 0:e),s),a.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(t(void 0),i.allowStaleOnFetchAbort&&(t=e=>h(e,!0)))})}).then(h,e=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=e),l(e))),c=Object.assign(d,{__abortController:a,__staleWhileFetching:r,__returned:void 0});return void 0===t?(this.set(e,c,{...n.options,status:void 0}),t=this.#l.get(e)):this.#c[t]=c,c}#_(e){return!!this.#A&&!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof f}async fetch(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:n=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:c=this.allowStaleOnFetchRejection,ignoreFetchAbort:u=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:p,forceRefresh:g=!1,status:v,signal:y}=t;if(!this.#A)return v&&(v.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:r,status:v});let m={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:r,ttl:a,noDisposeOnSet:o,size:n,sizeCalculation:h,noUpdateTTL:l,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:c,allowStaleOnFetchAbort:f,ignoreFetchAbort:u,status:v,signal:y},S=this.#l.get(e);if(void 0===S){v&&(v.fetch="miss");let t=this.#w(e,S,m,p);return t.__returned=t}{let t=this.#c[S];if(this.#_(t)){let e=i&&void 0!==t.__staleWhileFetching;return v&&(v.fetch="inflight",e&&(v.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}let r=this.#T(S);if(!g&&!r)return v&&(v.fetch="hit"),this.#L(S),s&&this.#M(S),v&&this.#D(v,S),t;let a=this.#w(e,S,m,p),o=void 0!==a.__staleWhileFetching&&i;return v&&(v.fetch=r?"stale":"refresh",o&&r&&(v.returnedStale=!0)),o?a.__staleWhileFetching:a.__returned=a}}async forceFetch(e,t={}){let i=await this.fetch(e,t);if(void 0===i)throw Error("fetch() returned undefined");return i}memo(e,t={}){let i=this.#o;if(!i)throw Error("no memoMethod provided to constructor");let{context:s,forceRefresh:r,...a}=t,o=this.get(e,a);if(!r&&void 0!==o)return o;let n=i(e,o,{options:a,context:s});return this.set(e,n,a),n}get(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:a}=t,o=this.#l.get(e);if(void 0!==o){let t=this.#c[o],n=this.#_(t);return(a&&this.#D(a,o),this.#T(o))?(a&&(a.get="stale"),n)?(a&&i&&void 0!==t.__staleWhileFetching&&(a.returnedStale=!0),i?t.__staleWhileFetching:void 0):(r||this.#O(e,"expire"),a&&i&&(a.returnedStale=!0),i?t:void 0):(a&&(a.get="hit"),n)?t.__staleWhileFetching:(this.#L(o),s&&this.#M(o),t)}a&&(a.get="miss")}#B(e,t){this.#f[t]=e,this.#u[e]=t}#L(e){e!==this.#g&&(e===this.#p?this.#p=this.#u[e]:this.#B(this.#f[e],this.#u[e]),this.#B(this.#g,e),this.#g=e)}delete(e){return this.#O(e,"delete")}#O(e,t){let i=!1;if(0!==this.#n){let s=this.#l.get(e);if(void 0!==s){if(i=!0,1===this.#n)this.#N(t);else{this.#j(s);let i=this.#c[s];if(this.#_(i)?i.__abortController.abort(Error("deleted")):(this.#x||this.#k)&&(this.#x&&this.#s?.(i,e,t),this.#k&&this.#y?.push([i,e,t])),this.#l.delete(e),this.#d[s]=void 0,this.#c[s]=void 0,s===this.#g)this.#g=this.#f[s];else if(s===this.#p)this.#p=this.#u[s];else{let e=this.#f[s];this.#u[e]=this.#u[s];let t=this.#u[s];this.#f[t]=this.#f[s]}this.#n--,this.#v.push(s)}}}if(this.#k&&this.#y?.length){let e;let t=this.#y;for(;e=t?.shift();)this.#r?.(...e)}return i}clear(){return this.#N("delete")}#N(e){for(let t of this.#F({allowStale:!0})){let i=this.#c[t];if(this.#_(i))i.__abortController.abort(Error("deleted"));else{let s=this.#d[t];this.#x&&this.#s?.(i,s,e),this.#k&&this.#y?.push([i,s,e])}}if(this.#l.clear(),this.#c.fill(void 0),this.#d.fill(void 0),this.#b&&this.#S&&(this.#b.fill(0),this.#S.fill(0)),this.#m&&this.#m.fill(0),this.#p=0,this.#g=0,this.#v.length=0,this.#h=0,this.#n=0,this.#k&&this.#y){let e;let t=this.#y;for(;e=t?.shift();)this.#r?.(...e)}}}var x=i(71615);let A=function(e){let t=new b({max:e?.uniqueTokenPerInterval||500,ttl:e?.interval||6e4});return{check:(e,i)=>new Promise((s,r)=>{let a=t.get(i)||[0];0===a[0]&&t.set(i,a),a[0]+=1,a[0]>=e?r():s()})}}({interval:6e4,uniqueTokenPerInterval:500});async function k(e){try{let t=(0,x.headers)().get("x-forwarded-for")||"anonymous";try{await A.check(10,t)}catch{return n.NextResponse.json({error:"Too many requests"},{status:429})}let i=e.nextUrl.searchParams,s=i.get("code"),r=i.get("orderId");if(!s||!r)return n.NextResponse.json({error:"Verification code and Order ID are required"},{status:400});let a=await h.prisma.order.findFirst({where:{orderNumber:r,verificationCode:s},select:{id:!0,orderNumber:!0,createdAt:!0,status:!0,paymentStatus:!0,total:!0,user:{select:{name:!0}},address:!0,items:{select:{quantity:!0,product:{select:{name:!0}}}}}});if(!a)return n.NextResponse.json({valid:!1,message:"Invalid verification code or order ID"},{status:404});let o=a.address,l=o?.name||a.user?.name||"Customer";return n.NextResponse.json({valid:!0,order:{orderNumber:a.orderNumber,date:a.createdAt,status:a.status,paymentStatus:a.paymentStatus,customerName:l,total:a.total,itemCount:a.items.length,items:a.items.map(e=>({name:e.product.name,quantity:e.quantity}))}})}catch(e){return console.error("Verification error:",e),n.NextResponse.json({error:"Internal server error"},{status:500})}}let _=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/verify-receipt/route",pathname:"/api/verify-receipt",filename:"route",bundlePath:"app/api/verify-receipt/route"},resolvedPagePath:"C:\\Users\\samia\\Desktop\\Learning Journey\\HostNin\\SilkMartWebSite\\app\\api\\verify-receipt\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:w,staticGenerationAsyncStorage:L,serverHooks:z}=_,F="/api/verify-receipt/route";function T(){return(0,o.patchFetch)({serverHooks:z,staticGenerationAsyncStorage:L})}},72331:(e,t,i)=>{i.d(t,{prisma:()=>a});var s=i(53524);let r=globalThis,a=r.prisma??new s.PrismaClient({log:["error"]});r.prisma=a},71615:(e,t,i)=>{i.r(t);var s=i(88757),r={};for(let e in s)"default"!==e&&(r[e]=()=>s[e]);i.d(t,r)},33085:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return a}});let s=i(45869),r=i(6278);class a{get isEnabled(){return this._provider.isEnabled}enable(){let e=s.staticGenerationAsyncStorage.getStore();return e&&(0,r.trackDynamicDataAccessed)(e,"draftMode().enable()"),this._provider.enable()}disable(){let e=s.staticGenerationAsyncStorage.getStore();return e&&(0,r.trackDynamicDataAccessed)(e,"draftMode().disable()"),this._provider.disable()}constructor(e){this._provider=e}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},88757:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{cookies:function(){return u},draftMode:function(){return f},headers:function(){return c}});let s=i(68996),r=i(53047),a=i(92044),o=i(72934),n=i(33085),h=i(6278),l=i(45869),d=i(54580);function c(){let e="headers",t=l.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return r.HeadersAdapter.seal(new Headers({}));(0,h.trackDynamicDataAccessed)(t,e)}return(0,d.getExpectedRequestStore)(e).headers}function u(){let e="cookies",t=l.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return s.RequestCookiesAdapter.seal(new a.RequestCookies(new Headers({})));(0,h.trackDynamicDataAccessed)(t,e)}let i=(0,d.getExpectedRequestStore)(e),r=o.actionAsyncStorage.getStore();return(null==r?void 0:r.isAction)||(null==r?void 0:r.isAppRoute)?i.mutableCookies:i.cookies}function f(){let e=(0,d.getExpectedRequestStore)("draftMode");return new n.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},53047:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{HeadersAdapter:function(){return a},ReadonlyHeadersError:function(){return r}});let s=i(38238);class r extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new r}}class a extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,i,r){if("symbol"==typeof i)return s.ReflectAdapter.get(t,i,r);let a=i.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==o)return s.ReflectAdapter.get(t,o,r)},set(t,i,r,a){if("symbol"==typeof i)return s.ReflectAdapter.set(t,i,r,a);let o=i.toLowerCase(),n=Object.keys(e).find(e=>e.toLowerCase()===o);return s.ReflectAdapter.set(t,n??i,r,a)},has(t,i){if("symbol"==typeof i)return s.ReflectAdapter.has(t,i);let r=i.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===r);return void 0!==a&&s.ReflectAdapter.has(t,a)},deleteProperty(t,i){if("symbol"==typeof i)return s.ReflectAdapter.deleteProperty(t,i);let r=i.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===r);return void 0===a||s.ReflectAdapter.deleteProperty(t,a)}})}static seal(e){return new Proxy(e,{get(e,t,i){switch(t){case"append":case"delete":case"set":return r.callable;default:return s.ReflectAdapter.get(e,t,i)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new a(e)}append(e,t){let i=this.headers[e];"string"==typeof i?this.headers[e]=[i,t]:Array.isArray(i)?i.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[i,s]of this.entries())e.call(t,s,i,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),i=this.get(t);yield[t,i]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},68996:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{MutableRequestCookiesAdapter:function(){return c},ReadonlyRequestCookiesError:function(){return o},RequestCookiesAdapter:function(){return n},appendMutableCookies:function(){return d},getModifiedCookieValues:function(){return l}});let s=i(92044),r=i(38238),a=i(45869);class o extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new o}}class n{static seal(e){return new Proxy(e,{get(e,t,i){switch(t){case"clear":case"delete":case"set":return o.callable;default:return r.ReflectAdapter.get(e,t,i)}}})}}let h=Symbol.for("next.mutated.cookies");function l(e){let t=e[h];return t&&Array.isArray(t)&&0!==t.length?t:[]}function d(e,t){let i=l(t);if(0===i.length)return!1;let r=new s.ResponseCookies(e),a=r.getAll();for(let e of i)r.set(e);for(let e of a)r.set(e);return!0}class c{static wrap(e,t){let i=new s.ResponseCookies(new Headers);for(let t of e.getAll())i.set(t);let o=[],n=new Set,l=()=>{let e=a.staticGenerationAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),o=i.getAll().filter(e=>n.has(e.name)),t){let e=[];for(let t of o){let i=new s.ResponseCookies(new Headers);i.set(t),e.push(i.toString())}t(e)}};return new Proxy(i,{get(e,t,i){switch(t){case h:return o;case"delete":return function(...t){n.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{l()}};case"set":return function(...t){n.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{l()}};default:return r.ReflectAdapter.get(e,t,i)}}})}}}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>i(64061));module.exports=s})();