exports.id=4048,exports.ids=[4048],exports.modules={3161:(e,s,a)=>{Promise.resolve().then(a.bind(a,58767))},58767:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var t=a(10326),r=a(17577),l=a(90434),i=a(35047),n=a(79635),o=a(48705),d=a(77636),c=a(67427),m=a(26092),x=a(16671),h=a(40617),p=a(77506),u=a(71810),f=a(86333),g=a(33071),b=a(90772),j=a(16884),N=a(15828);let w=[{icon:n.Z,label:"Profile",href:"/dashboard/profile"},{icon:o.Z,label:"Orders",href:"/dashboard/orders"},{icon:d.Z,label:"Addresses",href:"/dashboard/addresses"},{icon:c.Z,label:"Wishlist",href:"/dashboard/wishlist"},{icon:m.Z,label:"Loyalty",href:"/dashboard/loyalty"},{icon:x.Z,label:"Wallet",href:"/dashboard/wallet"},{icon:h.Z,label:"Messages",href:"/dashboard/chat"}];function y({children:e}){let s=(0,i.usePathname)(),a=(0,i.useRouter)(),[n,o]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),m=async()=>{try{await fetch("/api/auth/me",{method:"POST",credentials:"include"}),localStorage.removeItem("auth-storage"),a.push("/")}catch(e){console.error("Logout failed:",e)}};return n?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx(p.Z,{className:"w-8 h-8 animate-spin text-blue-600"})}):d?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:(0,t.jsxs)("div",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-8",children:[(0,t.jsxs)("div",{className:"lg:hidden mb-4",children:[t.jsx(g.Zb,{className:"p-3 sm:p-4 mb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold text-sm",children:d.name?.charAt(0).toUpperCase()||"U"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"font-bold text-sm truncate",children:d.name}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:d.email})]}),t.jsx(j.Z,{role:d.role,tier:d.tier,size:"sm"})]})}),t.jsx("div",{className:"overflow-x-auto -mx-3 px-3",children:(0,t.jsxs)("div",{className:"flex gap-2 pb-2 min-w-max",children:[w.map(e=>{let a=e.icon,r=s===e.href;return t.jsx(l.default,{href:e.href,children:(0,t.jsxs)("div",{className:`flex items-center gap-2 px-4 py-2.5 rounded-full whitespace-nowrap text-sm font-medium transition ${r?"bg-blue-600 text-white":"bg-white border hover:bg-gray-50"}`,children:[t.jsx(a,{className:"w-4 h-4"}),e.label]})},e.href)}),(0,t.jsxs)("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2.5 rounded-full whitespace-nowrap text-sm font-medium bg-white border text-red-600 hover:bg-red-50 transition",children:[t.jsx(u.Z,{className:"w-4 h-4"}),"Logout"]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 lg:gap-8",children:[t.jsx("aside",{className:"hidden lg:block lg:col-span-1",children:(0,t.jsxs)(g.Zb,{className:"p-6 sticky top-20",children:[(0,t.jsxs)("div",{className:"mb-6 pb-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold text-lg",children:d.name?.charAt(0).toUpperCase()||"U"}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"font-bold",children:d.name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:d.email})]})]}),t.jsx("div",{className:"mt-3",children:t.jsx(j.Z,{role:d.role,tier:d.tier,size:"sm"})}),t.jsx(N.Z,{currentRole:d.role}),("admin"===d.role||"superadmin"===d.role||"seller"===d.role)&&t.jsx("div",{className:"mt-3",children:t.jsx(l.default,{href:"/admin",children:(0,t.jsxs)(b.z,{variant:"outline",size:"sm",className:"w-full gap-2 text-purple-600 border-purple-200 hover:bg-purple-50",children:[t.jsx(f.Z,{className:"w-4 h-4"}),"seller"===d.role?"Go to Seller Panel":"Back to Admin Panel"]})})})]}),(0,t.jsxs)("nav",{className:"space-y-2",children:[w.map(e=>{let a=e.icon,r=s===e.href;return(0,t.jsxs)(l.default,{href:e.href,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition ${r?"bg-blue-600 text-white":"hover:bg-gray-100"}`,children:[t.jsx(a,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:e.label})]},e.href)}),(0,t.jsxs)(b.z,{variant:"ghost",className:"w-full justify-start gap-3 px-4 py-3 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:m,children:[t.jsx(u.Z,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})}),t.jsx("main",{className:"lg:col-span-3",children:e})]})]})}):null}},15828:(e,s,a)=>{"use strict";a.d(s,{Z:()=>b});var t=a(10326),r=a(17577),l=a(88129),i=a(16721),n=a(60763),o=a(58038),d=a(24061),c=a(79635),m=a(77506),x=a(941),h=a(97147),p=a(8798),u=a(94019),f=a(90772);let g={superadmin:{label:"Super Admin",icon:n.Z,color:"bg-gradient-to-r from-red-500 to-orange-500",textColor:"text-white"},admin:{label:"Admin",icon:o.Z,color:"bg-gradient-to-r from-yellow-500 to-amber-500",textColor:"text-white"},seller:{label:"Seller",icon:d.Z,color:"bg-gradient-to-r from-blue-500 to-cyan-500",textColor:"text-white"},customer:{label:"Customer",icon:c.Z,color:"bg-gradient-to-r from-green-500 to-emerald-500",textColor:"text-white"}};function b({currentRole:e,onRoleChange:s}){let[a,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[b,j]=(0,r.useState)(e),[N,w]=(0,r.useState)(null),[y,v]=(0,r.useState)(!1),[Z,C]=(0,r.useState)(!1),[S,k]=(0,r.useState)(!0),R=async e=>{c(!0);try{let a=await fetch("/api/auth/role-switch",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({targetRole:e})});if(a.ok){let e=await a.json();j(e.currentRole),v(e.isSwitched),o(!1),s?.(e.currentRole,e.isSwitched),window.location.reload()}}catch(e){console.error("Failed to switch role:",e)}finally{c(!1)}};if(S||!Z&&!y)return null;let z=g[b]||g.customer;return(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(f.z,{variant:"ghost",onClick:()=>o(!a),className:`gap-2 ${z.color} ${z.textColor} hover:opacity-90`,disabled:d,children:[d?t.jsx(m.Z,{className:"w-4 h-4 animate-spin"}):t.jsx(z.icon,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:z.label}),t.jsx(x.Z,{className:`w-4 h-4 transition-transform ${a?"rotate-180":""}`})]}),t.jsx(l.M,{children:a&&(0,t.jsxs)(i.E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-2xl border border-gray-100 overflow-hidden z-50",children:[(0,t.jsxs)("div",{className:"p-3 border-b bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(h.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Switch Role (Testing)"})]}),y&&(0,t.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:["Currently viewing as ",z.label]})]}),t.jsx("div",{className:"p-2",children:Object.entries(g).map(([e,s])=>{let a=s.icon,r=b===e;return(0,t.jsxs)("button",{onClick:()=>R(e),disabled:d||r,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all ${r?"bg-gray-100 cursor-default":"hover:bg-gray-50"}`,children:[t.jsx("div",{className:`p-1.5 rounded-lg ${s.color}`,children:t.jsx(a,{className:"w-4 h-4 text-white"})}),t.jsx("span",{className:`font-medium ${r?"text-gray-400":"text-gray-700"}`,children:s.label}),r&&t.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"Current"})]},e)})}),y&&t.jsx("div",{className:"p-2 border-t bg-orange-50",children:(0,t.jsxs)("button",{onClick:()=>R("superadmin"),disabled:d,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:[t.jsx(n.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Exit to Super Admin"})]})})]})})]}),t.jsx(l.M,{children:y&&(0,t.jsxs)(i.E.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"fixed top-0 left-0 right-0 z-[100] bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 flex items-center justify-center gap-4 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(p.Z,{className:"w-5 h-5"}),(0,t.jsxs)("span",{className:"font-medium",children:["You are viewing as ",t.jsx("strong",{children:z.label})]}),t.jsx("span",{className:"text-orange-100 text-sm",children:"(Auto-reverts in 4 hours)"})]}),t.jsx(f.z,{size:"sm",variant:"outline",onClick:()=>R("superadmin"),disabled:d,className:"bg-white/20 border-white/30 text-white hover:bg-white/30 gap-1",children:d?t.jsx(m.Z,{className:"w-4 h-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(u.Z,{className:"w-4 h-4"}),"Exit"]})})]})})]})}},33071:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>n,SZ:()=>d,Zb:()=>i,aY:()=>c,ll:()=>o});var t=a(10326),r=a(17577),l=a(77863);let i=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let n=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let o=r.forwardRef(({className:e,...s},a)=>t.jsx("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));o.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},13321:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`C:\Users\samia\Desktop\Learning Journey\HostNin\SilkMartWebSite\app\dashboard\layout.tsx#default`)}};