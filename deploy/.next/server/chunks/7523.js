"use strict";exports.id=7523,exports.ids=[7523],exports.modules={47523:(o,e,t)=>{t.d(e,{generateTemplatedPDF:()=>n});var r=t(17820);async function n(o){try{console.log("=== LOCAL PDF GENERATION ==="),console.log("Order ID:",o);let e=await (0,r.Z)(o);return console.log("PDF generated:",!!e,"Size:",e?.length||0,"bytes"),e}catch(o){return console.error("PDF generation error:",o),null}}},17820:(o,e,t)=>{t.d(e,{Z:()=>a});var r=t(6271),n=t(44020);let i=o=>new Date(o).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}),l=o=>{if(!o)return"-";try{let e=JSON.parse(o);return`${e.size||""}${e.color?" / "+e.color:""}`.trim()||"-"}catch{return"-"}};function c(o,e,t,r,n){o.drawText(e,{x:t,y:r,size:n.size,font:n.font,color:n.color,maxWidth:n.maxWidth})}async function a(o){try{console.log("Generating PDF for order:",o);let e=await (0,n.Qc)(o);if(!e)return console.error("Order not found for PDF generation:",o),null;let t=await r.PDFDocument.create(),a=t.addPage([595,842]),{width:s,height:d}=a.getSize(),f=await t.embedFont(r.StandardFonts.Helvetica),g=await t.embedFont(r.StandardFonts.HelveticaBold),h=(0,r.rgb)(.11,.19,.33),z=(0,r.rgb)(.13,.13,.13),u=(0,r.rgb)(.47,.47,.47),y=(0,r.rgb)(.96,.96,.96),m=(0,r.rgb)(.16,.65,.53),w=(0,r.rgb)(1,1,1),b=d-50;a.drawRectangle({x:0,y:d-100,width:s,height:100,color:w}),c(a,"CTG",50,b-5,{font:g,size:24,color:h}),c(a,"Collection",105,b-5,{font:f,size:18,color:h}),c(a,"Premium Fashion & Lifestyle",50,b-22,{font:f,size:9,color:u}),c(a,"INVOICE",s-50-130,b,{font:f,size:9,color:u}),c(a,e.orderNumber,s-50-130,b-16,{font:g,size:14,color:h}),c(a,i(e.createdAt),s-50-130,b-32,{font:f,size:10,color:u}),b-=70,a.drawLine({start:{x:50,y:b},end:{x:s-50,y:b},thickness:1.5,color:h}),b-=35,c(a,"BILL TO",50,b,{font:g,size:9,color:u}),b-=16,c(a,e.address.name,50,b,{font:g,size:11,color:z}),b-=14,c(a,e.user?.email||e.guestEmail||"",50,b,{font:f,size:10,color:u}),b-=12,c(a,e.address.phone,50,b,{font:f,size:10,color:u});let x=b+42;for(let o of(c(a,"SHIP TO",s/2,x,{font:g,size:9,color:u}),x-=16,c(a,e.address.name,s/2,x,{font:g,size:11,color:z}),x-=14,c(a,e.address.address,s/2,x,{font:f,size:10,color:u,maxWidth:200}),x-=12,c(a,`${e.address.city}, ${e.address.district}`,s/2,x,{font:f,size:10,color:u}),b-=45,a.drawRectangle({x:50,y:b-8,width:s-100,height:24,color:y}),c(a,"ITEM",60,b,{font:g,size:9,color:u}),c(a,"VARIANT",220,b,{font:g,size:9,color:u}),c(a,"QTY",340,b,{font:g,size:9,color:u}),c(a,"PRICE",410,b,{font:g,size:9,color:u}),c(a,"TOTAL",490,b,{font:g,size:9,color:u}),b-=30,e.items)){c(a,o.product.name,60,b,{font:g,size:10,color:z});let e=l(o.variantInfo);c(a,e,220,b,{font:f,size:10,color:u}),c(a,o.quantity.toString(),340,b,{font:f,size:10,color:z}),c(a,`Tk${o.price.toLocaleString()}`,410,b,{font:f,size:10,color:z});let t=o.price*o.quantity;c(a,`Tk${t.toLocaleString()}`,490,b,{font:g,size:10,color:z}),b-=28,a.drawLine({start:{x:50,y:b+12},end:{x:s-50,y:b+12},thickness:.5,color:(0,r.rgb)(.9,.9,.9)})}b-=15,a.drawRectangle({x:50,y:b-80,width:s-100,height:90,color:y});let T=s-50-80;c(a,"Subtotal",70,b,{font:f,size:10,color:u}),c(a,`Tk${e.subtotal.toLocaleString()}`,T,b,{font:f,size:10,color:z}),b-=18,c(a,"Shipping",70,b,{font:f,size:10,color:u}),c(a,`Tk${e.shippingCost.toLocaleString()}`,T,b,{font:f,size:10,color:z}),b-=18,e.discount>0&&(c(a,"Discount",70,b,{font:f,size:10,color:m}),c(a,`-Tk${e.discount.toLocaleString()}`,T,b,{font:f,size:10,color:m}),b-=18),a.drawLine({start:{x:60,y:b+5},end:{x:s-50-10,y:b+5},thickness:1,color:(0,r.rgb)(.85,.85,.85)}),b-=8,c(a,"Total",70,b,{font:g,size:12,color:h}),c(a,`Tk${e.total.toLocaleString()}`,T-10,b,{font:g,size:14,color:h}),b-=40,a.drawRectangle({x:50,y:b-25,width:s-100,height:40,color:w,borderColor:(0,r.rgb)(.9,.9,.9),borderWidth:1});let p="cod"===e.paymentMethod?"Cash on Delivery":"Online Payment";if(c(a,`Payment: ${p}`,65,b-5,{font:g,size:10,color:z}),"paid"===e.paymentStatus){let o=s-50-70,e=b-12;a.drawRectangle({x:o,y:e,width:50,height:22,color:m,borderColor:m,borderWidth:1}),c(a,"Paid",o+12,e+6,{font:g,size:10,color:w})}b-=50,e.verificationCode&&(a.drawRectangle({x:50,y:b-25,width:s-100,height:40,color:y,borderColor:(0,r.rgb)(.9,.9,.9),borderWidth:1}),c(a,"Verification Code",65,b-5,{font:f,size:9,color:u}),c(a,e.verificationCode,s-50-80,b-5,{font:g,size:14,color:h})),a.drawRectangle({x:0,y:0,width:s,height:60,color:h}),c(a,"Thank you for shopping with CTG Collection! * ctgcollection2@gmail.com",100,32,{font:f,size:10,color:w});let S=await t.save();return console.log("PDF generated successfully, size:",S.length,"bytes"),Buffer.from(S)}catch(o){return console.error("Error generating PDF:",o),null}}}};